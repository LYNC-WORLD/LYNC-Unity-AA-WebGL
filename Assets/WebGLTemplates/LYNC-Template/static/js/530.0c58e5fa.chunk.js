(self.webpackChunkbiconomy=self.webpackChunkbiconomy||[]).push([[530],{566:(e,t,r)=>{"use strict";const{AbortError:n,codes:i}=r(31693),{isNodeStream:o,isWebStream:a,kControllerErrorFunction:s}=r(8515),l=r(84288),{ERR_INVALID_ARG_TYPE:d}=i;e.exports.addAbortSignal=function(t,r){if(((e,t)=>{if("object"!==typeof e||!("aborted"in e))throw new d(t,"AbortSignal",e)})(t,"signal"),!o(r)&&!a(r))throw new d("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!==typeof e||!("aborted"in e))return t;const r=o(t)?()=>{t.destroy(new n(void 0,{cause:e.reason}))}:()=>{t[s](new n(void 0,{cause:e.reason}))};return e.aborted?r():(e.addEventListener("abort",r),l(t,(()=>e.removeEventListener("abort",r)))),t}},93282:(e,t,r)=>{"use strict";const{StringPrototypeSlice:n,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:a}=r(81981),{Buffer:s}=r(19778),{inspect:l}=r(10224);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let r=this.head,n=0;for(;r;)o(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,i=0;do{const o=r.data;if(!(e>o.length)){e===o.length?(t+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(o,0,e),this.head=r,r.data=n(o,e));break}t+=o,e-=o.length,++i}while(null!==(r=r.next));return this.length-=i,t}_getBuffer(e){const t=s.allocUnsafe(e),r=e;let n=this.head,i=0;do{const s=n.data;if(!(e>s.length)){e===s.length?(o(t,s,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(o(t,new a(s.buffer,s.byteOffset,e),r-e),this.head=n,n.data=s.slice(e));break}o(t,s,r-e),e-=s.length,++i}while(null!==(n=n.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},30775:(e,t,r)=>{"use strict";const{pipeline:n}=r(33887),i=r(76531),{destroyer:o}=r(48506),{isNodeStream:a,isReadable:s,isWritable:l,isWebStream:d,isTransformStream:c,isWritableStream:u,isReadableStream:h}=r(8515),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=r(31693),b=r(84288);e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new g("streams");if(1===t.length)return i.from(t[0]);const w=[...t];if("function"===typeof t[0]&&(t[0]=i.from(t[0])),"function"===typeof t[t.length-1]){const e=t.length-1;t[e]=i.from(t[e])}for(let n=0;n<t.length;++n)if(a(t[n])||d(t[n])){if(n<t.length-1&&!(s(t[n])||h(t[n])||c(t[n])))throw new p(`streams[${n}]`,w[n],"must be readable");if(n>0&&!(l(t[n])||u(t[n])||c(t[n])))throw new p(`streams[${n}]`,w[n],"must be writable")}let y,m,_,v,S;const E=t[0],R=n(t,(function(e){const t=v;v=null,t?t(e):e?S.destroy(e):I||A||S.destroy()})),A=!!(l(E)||u(E)||c(E)),I=!!(s(R)||h(R)||c(R));if(S=new i({writableObjectMode:!(null===E||void 0===E||!E.writableObjectMode),readableObjectMode:!(null===R||void 0===R||!R.writableObjectMode),writable:A,readable:I}),A){if(a(E))S._write=function(e,t,r){E.write(e,t)?r():y=r},S._final=function(e){E.end(),m=e},E.on("drain",(function(){if(y){const e=y;y=null,e()}}));else if(d(E)){const e=(c(E)?E.writable:E).getWriter();S._write=async function(t,r,n){try{await e.ready,e.write(t).catch((()=>{})),n()}catch(i){n(i)}},S._final=async function(t){try{await e.ready,e.close().catch((()=>{})),m=t}catch(r){t(r)}}}const e=c(R)?R.readable:R;b(e,(()=>{if(m){const e=m;m=null,e()}}))}if(I)if(a(R))R.on("readable",(function(){if(_){const e=_;_=null,e()}})),R.on("end",(function(){S.push(null)})),S._read=function(){for(;;){const e=R.read();if(null===e)return void(_=S._read);if(!S.push(e))return}};else if(d(R)){const e=(c(R)?R.readable:R).getReader();S._read=async function(){for(;;)try{const{value:t,done:r}=await e.read();if(!S.push(t))return;if(r)return void S.push(null)}catch{return}}}return S._destroy=function(e,t){e||null===v||(e=new f),_=null,y=null,m=null,null===v?t(e):(v=t,a(R)&&o(R,e))},S}},48506:(e,t,r)=>{"use strict";const n=r(1426),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:a}=r(31693),{Symbol:s}=r(81981),{kDestroyed:l,isDestroyed:d,isFinished:c,isServerRequest:u}=r(8515),h=s("kDestroy"),f=s("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function g(e,t,r){let i=!1;function o(t){if(i)return;i=!0;const o=e._readableState,a=e._writableState;p(t,a,o),a&&(a.closed=!0),o&&(o.closed=!0),"function"===typeof r&&r(t),t?n.nextTick(b,e,t):n.nextTick(w,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function b(e,t){y(e,t),w(e)}function w(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!==r&&void 0!==r&&r.emitClose||null!==t&&void 0!==t&&t.emitClose)&&e.emit("close")}function y(e,t){const r=e._readableState,n=e._writableState;null!==n&&void 0!==n&&n.errorEmitted||null!==r&&void 0!==r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function m(e,t,r){const i=e._readableState,o=e._writableState;if(null!==o&&void 0!==o&&o.destroyed||null!==i&&void 0!==i&&i.destroyed)return this;null!==i&&void 0!==i&&i.autoDestroy||null!==o&&void 0!==o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(y,e,t):y(e,t))}function _(e){let t=!1;function r(r){if(t)return void m(e,null!==r&&void 0!==r?r:new o);t=!0;const i=e._readableState,a=e._writableState,s=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(h,r):r?m(e,r,!0):n.nextTick(v,e)}try{e._construct((e=>{n.nextTick(r,e)}))}catch(i){n.nextTick(r,i)}}function v(e){e.emit(f)}function S(e){return(null===e||void 0===e?void 0:e.setHeader)&&"function"===typeof e.abort}function E(e){e.emit("close")}function R(e,t){e.emit("error",t),n.nextTick(E,e)}e.exports={construct:function(e,t){if("function"!==typeof e._construct)return;const r=e._readableState,i=e._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(f,t),e.listenerCount(f)>1||n.nextTick(_,e)},destroyer:function(e,t){e&&!d(e)&&(t||c(e)||(t=new a),u(e)?(e.socket=null,e.destroy(t)):S(e)?e.abort():S(e.req)?e.req.abort():"function"===typeof e.destroy?e.destroy(t):"function"===typeof e.close?e.close():t?n.nextTick(R,e,t):n.nextTick(E,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){const r=this._readableState,n=this._writableState,o=n||r;return null!==n&&void 0!==n&&n.destroyed||null!==r&&void 0!==r&&r.destroyed?("function"===typeof t&&t(),this):(p(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?g(this,e,t):this.once(h,(function(r){g(this,i(r,e),t)})),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:m}},76531:(e,t,r)=>{"use strict";const{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:o,ObjectSetPrototypeOf:a}=r(81981);e.exports=d;const s=r(12716),l=r(24213);a(d.prototype,s.prototype),a(d,s);{const e=o(l.prototype);for(let t=0;t<e.length;t++){const r=e[t];d.prototype[r]||(d.prototype[r]=l.prototype[r])}}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),l.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let c,u;function h(){return void 0===c&&(c={}),c}n(d.prototype,{writable:{__proto__:null,...i(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(l.prototype,"writableLength")},writableFinished:{__proto__:null,...i(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),d.fromWeb=function(e,t){return h().newStreamDuplexFromReadableWritablePair(e,t)},d.toWeb=function(e){return h().newReadableWritablePairFromDuplex(e)},d.from=function(e){return u||(u=r(41290)),u(e,"body")}},41290:(e,t,r)=>{const n=r(1426),i=r(19778),{isReadable:o,isWritable:a,isIterable:s,isNodeStream:l,isReadableNodeStream:d,isWritableNodeStream:c,isDuplexNodeStream:u}=r(8515),h=r(84288),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g}}=r(31693),{destroyer:b}=r(48506),w=r(76531),y=r(12716),{createDeferredPromise:m}=r(10224),_=r(44741),v=globalThis.Blob||i.Blob,S="undefined"!==typeof v?function(e){return e instanceof v}:function(e){return!1},E=globalThis.AbortController||r(35935).AbortController,{FunctionPrototypeCall:R}=r(81981);class A extends w{constructor(e){super(e),!1===(null===e||void 0===e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null===e||void 0===e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function I(e){const t=e.readable&&"function"!==typeof e.readable.read?y.wrap(e.readable):e.readable,r=e.writable;let n,i,s,l,d,c=!!o(t),u=!!a(r);function p(e){const t=l;l=null,t?t(e):e&&d.destroy(e)}return d=new A({readableObjectMode:!(null===t||void 0===t||!t.readableObjectMode),writableObjectMode:!(null===r||void 0===r||!r.writableObjectMode),readable:c,writable:u}),u&&(h(r,(e=>{u=!1,e&&b(t,e),p(e)})),d._write=function(e,t,i){r.write(e,t)?i():n=i},d._final=function(e){r.end(),i=e},r.on("drain",(function(){if(n){const e=n;n=null,e()}})),r.on("finish",(function(){if(i){const e=i;i=null,e()}}))),c&&(h(t,(e=>{c=!1,e&&b(t,e),p(e)})),t.on("readable",(function(){if(s){const e=s;s=null,e()}})),t.on("end",(function(){d.push(null)})),d._read=function(){for(;;){const e=t.read();if(null===e)return void(s=d._read);if(!d.push(e))return}}),d._destroy=function(e,o){e||null===l||(e=new f),s=null,n=null,i=null,null===l?o(e):(l=o,b(r,e),b(t,e))},d}e.exports=function e(t,r){if(u(t))return t;if(d(t))return I({readable:t});if(c(t))return I({writable:t});if(l(t))return I({writable:!1,readable:!1});if("function"===typeof t){const{value:e,write:i,final:o,destroy:a}=function(e){let{promise:t,resolve:r}=m();const i=new E,o=i.signal,a=e(async function*(){for(;;){const e=t;t=null;const{chunk:i,done:a,cb:s}=await e;if(n.nextTick(s),a)return;if(o.aborted)throw new f(void 0,{cause:o.reason});({promise:t,resolve:r}=m()),yield i}}(),{signal:o});return{value:a,write(e,t,n){const i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){const t=r;r=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(s(e))return _(A,e,{objectMode:!0,write:i,final:o,destroy:a});const l=null===e||void 0===e?void 0:e.then;if("function"===typeof l){let t;const r=R(l,e,(e=>{if(null!=e)throw new g("nully","body",e)}),(e=>{b(t,e)}));return t=new A({objectMode:!0,readable:!1,write:i,final(e){o((async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}}))},destroy:a})}throw new g("Iterable, AsyncIterable or AsyncFunction",r,e)}if(S(t))return e(t.arrayBuffer());if(s(t))return _(A,t,{objectMode:!0,writable:!1});if("object"===typeof(null===t||void 0===t?void 0:t.writable)||"object"===typeof(null===t||void 0===t?void 0:t.readable)){return I({readable:null!==t&&void 0!==t&&t.readable?d(null===t||void 0===t?void 0:t.readable)?null===t||void 0===t?void 0:t.readable:e(t.readable):void 0,writable:null!==t&&void 0!==t&&t.writable?c(null===t||void 0===t?void 0:t.writable)?null===t||void 0===t?void 0:t.writable:e(t.writable):void 0})}const i=null===t||void 0===t?void 0:t.then;if("function"===typeof i){let e;return R(i,t,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{b(e,t)})),e=new A({objectMode:!0,writable:!1,read(){}})}throw new p(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},84288:(e,t,r)=>{const n=r(1426),{AbortError:i,codes:o}=r(31693),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=o,{kEmptyObject:l,once:d}=r(10224),{validateAbortSignal:c,validateFunction:u,validateObject:h,validateBoolean:f}=r(96168),{Promise:p,PromisePrototypeThen:g}=r(81981),{isClosed:b,isReadable:w,isReadableNodeStream:y,isReadableStream:m,isReadableFinished:_,isReadableErrored:v,isWritable:S,isWritableNodeStream:E,isWritableStream:R,isWritableFinished:A,isWritableErrored:I,isNodeStream:T,willEmitClose:P,kIsClosedPromise:k}=r(8515);const C=()=>{};function N(e,t,r){var o,f;if(2===arguments.length?(r=t,t=l):null==t?t=l:h(t,"options"),u(r,"callback"),c(t.signal,"options.signal"),r=d(r),m(e)||R(e))return function(e,t,r){let o=!1,a=C;if(t.signal)if(a=()=>{o=!0,r.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(a);else{const n=r;r=d((function(){t.signal.removeEventListener("abort",a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.apply(e,i)})),t.signal.addEventListener("abort",a)}const s=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];o||n.nextTick((()=>r.apply(e,i)))};return g(e[k].promise,s,s),C}(e,t,r);if(!T(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);const p=null!==(o=t.readable)&&void 0!==o?o:y(e),N=null!==(f=t.writable)&&void 0!==f?f:E(e),x=e._writableState,O=e._readableState,M=()=>{e.writable||D()};let L=P(e)&&y(e)===p&&E(e)===N,j=A(e,!1);const D=()=>{j=!0,e.destroyed&&(L=!1),(!L||e.readable&&!p)&&(p&&!W||r.call(e))};let W=_(e,!1);const U=()=>{W=!0,e.destroyed&&(L=!1),(!L||e.writable&&!N)&&(N&&!j||r.call(e))},$=t=>{r.call(e,t)};let F=b(e);const q=()=>{F=!0;const t=I(e)||v(e);return t&&"boolean"!==typeof t?r.call(e,t):p&&!W&&y(e,!0)&&!_(e,!1)?r.call(e,new s):!N||j||A(e,!1)?void r.call(e):r.call(e,new s)},B=()=>{F=!0;const t=I(e)||v(e);if(t&&"boolean"!==typeof t)return r.call(e,t);r.call(e)},H=()=>{e.req.on("finish",D)};!function(e){return e.setHeader&&"function"===typeof e.abort}(e)?N&&!x&&(e.on("end",M),e.on("close",M)):(e.on("complete",D),L||e.on("abort",q),e.req?H():e.on("request",H)),L||"boolean"!==typeof e.aborted||e.on("aborted",q),e.on("end",U),e.on("finish",D),!1!==t.error&&e.on("error",$),e.on("close",q),F?n.nextTick(q):null!==x&&void 0!==x&&x.errorEmitted||null!==O&&void 0!==O&&O.errorEmitted?L||n.nextTick(B):(p||L&&!w(e)||!j&&!1!==S(e))&&(N||L&&!S(e)||!W&&!1!==w(e))?O&&e.req&&e.aborted&&n.nextTick(B):n.nextTick(B);const Z=()=>{r=C,e.removeListener("aborted",q),e.removeListener("complete",D),e.removeListener("abort",q),e.removeListener("request",H),e.req&&e.req.removeListener("finish",D),e.removeListener("end",M),e.removeListener("close",M),e.removeListener("finish",D),e.removeListener("end",U),e.removeListener("error",$),e.removeListener("close",q)};if(t.signal&&!F){const o=()=>{const n=r;Z(),n.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(o);else{const n=r;r=d((function(){t.signal.removeEventListener("abort",o);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n.apply(e,i)})),t.signal.addEventListener("abort",o)}}return Z}e.exports=N,e.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=l),null!==(r=t)&&void 0!==r&&r.cleanup&&(f(t.cleanup,"cleanup"),n=t.cleanup),new p(((r,i)=>{const o=N(e,t,(e=>{n&&o(),e?i(e):r()}))}))}},44741:(e,t,r)=>{"use strict";const n=r(1426),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:a}=r(81981),{Buffer:s}=r(19778),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:d}=r(31693).codes;e.exports=function(e,t,r){let c,u;if("string"===typeof t||t instanceof s)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[o])u=!0,c=t[o]();else{if(!t||!t[a])throw new l("iterable",["Iterable"],t);u=!1,c=t[a]()}const h=new e({objectMode:!0,highWaterMark:1,...r});let f=!1;return h._read=function(){f||(f=!0,async function(){for(;;){try{const{value:e,done:t}=u?await c.next():c.next();if(t)h.push(null);else{const t=e&&"function"===typeof e.then?await e:e;if(null===t)throw f=!1,new d;if(h.push(t))continue;f=!1}}catch(e){h.destroy(e)}break}}())},h._destroy=function(e,t){i(async function(e){const t=void 0!==e&&null!==e,r="function"===typeof c.throw;if(t&&r){const{value:t,done:r}=await c.throw(e);if(await t,r)return}if("function"===typeof c.return){const{value:e}=await c.return();await e}}(e),(()=>n.nextTick(t,e)),(r=>n.nextTick(t,r||e)))},h}},46514:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ObjectSetPrototypeOf:i}=r(81981),{EventEmitter:o}=r(47465);function a(e){o.call(this,e)}function s(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}i(a.prototype,o.prototype),i(a,o),a.prototype.pipe=function(e,t){const r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",d));let a=!1;function l(){a||(a=!0,e.end())}function d(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function c(e){u(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function u(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",l),r.removeListener("close",d),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return s(r,"error",c),s(e,"error",c),r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e},e.exports={Stream:a,prependListener:s}},96553:(e,t,r)=>{"use strict";const n=globalThis.AbortController||r(35935).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:l}=r(31693),{validateAbortSignal:d,validateInteger:c,validateObject:u}=r(96168),h=r(81981).Symbol("kWeak"),{finished:f}=r(84288),p=r(30775),{addAbortSignalNoValidate:g}=r(566),{isWritable:b,isNodeStream:w}=r(8515),{ArrayPrototypePush:y,MathFloor:m,Number:_,NumberIsNaN:v,Promise:S,PromiseReject:E,PromisePrototypeThen:R,Symbol:A}=r(81981),I=A("kEmpty"),T=A("kEof");function P(e,t){if("function"!==typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&d(t.signal,"options.signal");let r=1;return null!=(null===t||void 0===t?void 0:t.concurrency)&&(r=m(t.concurrency)),c(r,"concurrency",1),async function*(){var i,o;const a=new n,s=this,d=[],c=a.signal,u={signal:c},h=()=>a.abort();let f,p;null!==t&&void 0!==t&&null!==(i=t.signal)&&void 0!==i&&i.aborted&&h(),null===t||void 0===t||null===(o=t.signal)||void 0===o||o.addEventListener("abort",h);let g=!1;function b(){g=!0}!async function(){try{for await(let t of s){var n;if(g)return;if(c.aborted)throw new l;try{t=e(t,u)}catch(o){t=E(o)}t!==I&&("function"===typeof(null===(n=t)||void 0===n?void 0:n.catch)&&t.catch(b),d.push(t),f&&(f(),f=null),!g&&d.length&&d.length>=r&&await new S((e=>{p=e})))}d.push(T)}catch(o){const e=E(o);R(e,void 0,b),d.push(e)}finally{var i;g=!0,f&&(f(),f=null),null===t||void 0===t||null===(i=t.signal)||void 0===i||i.removeEventListener("abort",h)}}();try{for(;;){for(;d.length>0;){const e=await d[0];if(e===T)return;if(c.aborted)throw new l;e!==I&&(yield e),d.shift(),p&&(p(),p=null)}await new S((e=>{f=e}))}}finally{a.abort(),g=!0,p&&(p(),p=null)}}.call(this)}async function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;for await(const r of C.call(this,e,t))return!0;return!1}function C(e,t){if("function"!==typeof e)throw new o("fn",["Function","AsyncFunction"],e);return P.call(this,(async function(t,r){return await e(t,r)?t:I}),t)}class N extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function x(e){if(e=_(e),v(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return null!=e&&u(e,"options"),null!=(null===e||void 0===e?void 0:e.signal)&&d(e.signal,"options.signal"),async function*(){let t=0;for await(const n of this){var r;if(null!==e&&void 0!==e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l({cause:e.signal.reason});yield[t++,n]}}.call(this)},drop:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&d(t.signal,"options.signal"),e=x(e),async function*(){var r;if(null!==t&&void 0!==t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(const i of this){var n;if(null!==t&&void 0!==t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;e--<=0&&(yield i)}}.call(this)},filter:C,flatMap:function(e,t){const r=P.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:P,take:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&d(t.signal,"options.signal"),e=x(e),async function*(){var r;if(null!==t&&void 0!==t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(const i of this){var n;if(null!==t&&void 0!==t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;if(!(e-- >0))return;yield i}}.call(this)},compose:function(e,t){if(null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&d(t.signal,"options.signal"),w(e)&&!b(e))throw new i("stream",e,"must be writable");const r=p(this,e);return null!==t&&void 0!==t&&t.signal&&g(t.signal,r),r}},e.exports.promiseReturningOperators={every:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("function"!==typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await k.call(this,(async function(){return!await e(...arguments)}),t)},forEach:async function(e,t){if("function"!==typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const r of P.call(this,(async function(t,r){return await e(t,r),I}),t));},reduce:async function(e,t,r){var i;if("function"!==typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=r&&u(r,"options"),null!=(null===r||void 0===r?void 0:r.signal)&&d(r.signal,"options.signal");let a=arguments.length>1;if(null!==r&&void 0!==r&&null!==(i=r.signal)&&void 0!==i&&i.aborted){const e=new l(void 0,{cause:r.signal.reason});throw this.once("error",(()=>{})),await f(this.destroy(e)),e}const s=new n,c=s.signal;if(null!==r&&void 0!==r&&r.signal){const e={once:!0,[h]:this};r.signal.addEventListener("abort",(()=>s.abort()),e)}let p=!1;try{for await(const n of this){var g;if(p=!0,null!==r&&void 0!==r&&null!==(g=r.signal)&&void 0!==g&&g.aborted)throw new l;a?t=await e(t,n,{signal:c}):(t=n,a=!0)}if(!p&&!a)throw new N}finally{s.abort()}return t},toArray:async function(e){null!=e&&u(e,"options"),null!=(null===e||void 0===e?void 0:e.signal)&&d(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(null!==e&&void 0!==e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l(void 0,{cause:e.signal.reason});y(t,n)}return t},some:k,find:async function(e,t){for await(const r of C.call(this,e,t))return r}}},2708:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n}=r(81981);e.exports=o;const i=r(87782);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n(o.prototype,i.prototype),n(o,i),o.prototype._transform=function(e,t,r){r(null,e)}},33887:(e,t,r)=>{const n=r(1426),{ArrayIsArray:i,Promise:o,SymbolAsyncIterator:a}=r(81981),s=r(84288),{once:l}=r(10224),d=r(48506),c=r(76531),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:w}=r(31693),{validateFunction:y,validateAbortSignal:m}=r(96168),{isIterable:_,isReadable:v,isReadableNodeStream:S,isNodeStream:E,isTransformStream:R,isWebStream:A,isReadableStream:I,isReadableEnded:T}=r(8515),P=globalThis.AbortController||r(35935).AbortController;let k,C;function N(e,t,r){let n=!1;e.on("close",(()=>{n=!0}));return{destroy:t=>{n||(n=!0,d.destroyer(e,t||new g("pipe")))},cleanup:s(e,{readable:t,writable:r},(e=>{n=!e}))}}function x(e){if(_(e))return e;if(S(e))return async function*(e){C||(C=r(12716));yield*C.prototype[a].call(e)}(e);throw new h("val",["Readable","Iterable","AsyncIterable"],e)}async function O(e,t,r,n){let i,{end:a}=n,l=null;const d=e=>{if(e&&(i=e),l){const e=l;l=null,e()}},c=()=>new o(((e,t)=>{i?t(i):l=()=>{i?t(i):e()}}));t.on("drain",d);const h=s(t,{readable:!1},d);try{t.writableNeedDrain&&await c();for await(const r of e)t.write(r)||await c();a&&t.end(),await c(),r()}catch(f){r(i!==f?u(i,f):f)}finally{h(),t.off("drain",d)}}async function M(e,t,r,n){let{end:i}=n;R(t)&&(t=t.writable);const o=t.getWriter();try{for await(const t of e)await o.ready,o.write(t).catch((()=>{}));await o.ready,i&&await o.close(),r()}catch(a){try{await o.abort(a),r(a)}catch(a){r(a)}}}function L(e,t,o){if(1===e.length&&i(e[0])&&(e=e[0]),e.length<2)throw new p("streams");const a=new P,s=a.signal,l=null===o||void 0===o?void 0:o.signal,d=[];function u(){D(new w)}let g,b;m(l,"options.signal"),null===l||void 0===l||l.addEventListener("abort",u);const y=[];let T,C=0;function L(e){D(e,0===--C)}function D(e,r){if(!e||g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code||(g=e),g||r){for(;y.length;)y.shift()(g);null===l||void 0===l||l.removeEventListener("abort",u),a.abort(),r&&(g||d.forEach((e=>e())),n.nextTick(t,g,b))}}for(let F=0;F<e.length;F++){const q=e[F],B=F<e.length-1,H=F>0,Z=B||!1!==(null===o||void 0===o?void 0:o.end),K=F===e.length-1;if(E(q)){if(Z){const{destroy:V,cleanup:G}=N(q,B,H);y.push(V),v(q)&&K&&d.push(G)}function W(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&L(e)}q.on("error",W),v(q)&&K&&d.push((()=>{q.removeListener("error",W)}))}if(0===F)if("function"===typeof q){if(T=q({signal:s}),!_(T))throw new f("Iterable, AsyncIterable or Stream","source",T)}else T=_(q)||S(q)||R(q)?q:c.from(q);else if("function"===typeof q){var U;if(R(T))T=x(null===(U=T)||void 0===U?void 0:U.readable);else T=x(T);if(T=q(T,{signal:s}),B){if(!_(T,!0))throw new f("AsyncIterable",`transform[${F-1}]`,T)}else{var $;k||(k=r(2708));const z=new k({objectMode:!0}),Y=null===($=T)||void 0===$?void 0:$.then;if("function"===typeof Y)C++,Y.call(T,(e=>{b=e,null!=e&&z.write(e),Z&&z.end(),n.nextTick(L)}),(e=>{z.destroy(e),n.nextTick(L,e)}));else if(_(T,!0))C++,O(T,z,L,{end:Z});else{if(!I(T)&&!R(T))throw new f("AsyncIterable or Promise","destination",T);{const Q=T.readable||T;C++,O(Q,z,L,{end:Z})}}T=z;const{destroy:J,cleanup:X}=N(T,!1,!0);y.push(J),K&&d.push(X)}}else if(E(q)){if(S(T)){C+=2;const ee=j(T,q,L,{end:Z});v(q)&&K&&d.push(ee)}else if(R(T)||I(T)){const te=T.readable||T;C++,O(te,q,L,{end:Z})}else{if(!_(T))throw new h("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],T);C++,O(T,q,L,{end:Z})}T=q}else if(A(q)){if(S(T))C++,M(x(T),q,L,{end:Z});else if(I(T)||_(T))C++,M(T,q,L,{end:Z});else{if(!R(T))throw new h("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],T);C++,M(T.readable,q,L,{end:Z})}T=q}else T=c.from(q)}return(null!==s&&void 0!==s&&s.aborted||null!==l&&void 0!==l&&l.aborted)&&n.nextTick(u),T}function j(e,t,r,i){let{end:o}=i,a=!1;if(t.on("close",(()=>{a||r(new b)})),e.pipe(t,{end:!1}),o){function l(){a=!0,t.end()}T(e)?n.nextTick(l):e.once("end",l)}else r();return s(e,{readable:!0,writable:!1},(t=>{const n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)})),s(t,{readable:!1,writable:!0},r)}e.exports={pipelineImpl:L,pipeline:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return L(t,l(function(e){return y(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(t)))}}},12716:(e,t,r)=>{const n=r(1426),{ArrayPrototypeIndexOf:i,NumberIsInteger:o,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:l,ObjectKeys:d,ObjectSetPrototypeOf:c,Promise:u,SafeSet:h,SymbolAsyncIterator:f,Symbol:p}=r(81981);e.exports=U,U.ReadableState=W;const{EventEmitter:g}=r(47465),{Stream:b,prependListener:w}=r(46514),{Buffer:y}=r(19778),{addAbortSignal:m}=r(566),_=r(84288);let v=r(10224).debuglog("stream",(e=>{v=e}));const S=r(93282),E=r(48506),{getHighWaterMark:R,getDefaultHighWaterMark:A}=r(43427),{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:P,ERR_OUT_OF_RANGE:k,ERR_STREAM_PUSH_AFTER_EOF:C,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:N}}=r(31693),{validateObject:x}=r(96168),O=p("kPaused"),{StringDecoder:M}=r(15948),L=r(44741);c(U.prototype,b.prototype),c(U,b);const j=()=>{},{errorOrDestroy:D}=E;function W(e,t,n){"boolean"!==typeof n&&(n=t instanceof r(76531)),this.objectMode=!(!e||!e.objectMode),n&&(this.objectMode=this.objectMode||!(!e||!e.readableObjectMode)),this.highWaterMark=e?R(this,e,"readableHighWaterMark",n):A(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[O]=null,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new M(e.encoding),this.encoding=e.encoding)}function U(e){if(!(this instanceof U))return new U(e);const t=this instanceof r(76531);this._readableState=new W(e,this,t),e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&m(e.signal,this)),b.call(this,e),E.construct(this,(()=>{this._readableState.needReadable&&Z(this,this._readableState)}))}function $(e,t,r,n){v("readableAddChunk",t);const i=e._readableState;let o;if(i.objectMode||("string"===typeof t?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=y.from(t,r).toString(i.encoding):(t=y.from(t,r),r=""))):t instanceof y?r="":b._isUint8Array(t)?(t=b._uint8ArrayToBuffer(t),r=""):null!=t&&(o=new T("chunk",["string","Buffer","Uint8Array"],t))),o)D(e,o);else if(null===t)i.reading=!1,function(e,t){if(v("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?B(e):(t.needReadable=!1,t.emittedReadable=!0,H(e))}(e,i);else if(i.objectMode||t&&t.length>0)if(n)if(i.endEmitted)D(e,new N);else{if(i.destroyed||i.errored)return!1;F(e,i,t,!0)}else if(i.ended)D(e,new C);else{if(i.destroyed||i.errored)return!1;i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||0!==t.length?F(e,i,t,!1):Z(e,i)):F(e,i,t,!1)}else n||(i.reading=!1,Z(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function F(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&B(e)),Z(e,t)}U.prototype.destroy=E.destroy,U.prototype._undestroy=E.undestroy,U.prototype._destroy=function(e,t){t(e)},U.prototype[g.captureRejectionSymbol]=function(e){this.destroy(e)},U.prototype.push=function(e,t){return $(this,e,t,!1)},U.prototype.unshift=function(e,t){return $(this,e,t,!0)},U.prototype.isPaused=function(){const e=this._readableState;return!0===e[O]||!1===e.flowing},U.prototype.setEncoding=function(e){const t=new M(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const r=this._readableState.buffer;let n="";for(const i of r)n+=t.write(i);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this};function q(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function B(e){const t=e._readableState;v("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(v("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(H,e))}function H(e){const t=e._readableState;v("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Y(e)}function Z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(K,e,t))}function K(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const r=t.length;if(v("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function V(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[O]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function G(e){v("readable nexttick read 0"),e.read(0)}function z(e,t){v("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Y(e),t.flowing&&!t.reading&&e.read(0)}function Y(e){const t=e._readableState;for(v("flow",t.flowing);t.flowing&&null!==e.read(););}function J(e,t){"function"!==typeof e.read&&(e=U.wrap(e,{objectMode:!0}));const r=async function*(e,t){let r,n=j;function i(t){this===e?(n(),n=j):n=t}e.on("readable",i);const o=_(e,{writable:!1},(e=>{r=e?I(r,e):null,n(),n=j}));try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new u(i)}}}catch(a){throw r=I(r,a),r}finally{!r&&!1===(null===t||void 0===t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",i),o()):E.destroyer(e,null)}}(e,t);return r.stream=e,r}function X(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function Q(e){const t=e._readableState;v("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(ee,t,e))}function ee(e,t){if(v("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)n.nextTick(te,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function te(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let re;function ne(){return void 0===re&&(re={}),re}U.prototype.read=function(e){v("read",e),void 0===e?e=NaN:o(e)||(e=s(e,10));const t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new k("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return v("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Q(this):B(this),null;if(0===(e=q(e,t))&&t.ended)return 0===t.length&&Q(this),null;let n,i=t.needReadable;if(v("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,v("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,v("reading, ended or constructing",i);else if(i){v("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0);try{this._read(t.highWaterMark)}catch(a){D(this,a)}t.sync=!1,t.reading||(e=q(r,t))}return n=e>0?X(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Q(this)),null===n||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",n)),n},U.prototype._read=function(e){throw new P("_read()")},U.prototype.pipe=function(e,t){const r=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new h(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),v("pipe count=%d opts=%j",i.pipes.length,t);const o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:b;function a(t,n){v("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,function(){v("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),l&&e.removeListener("drain",l);e.removeListener("error",f),e.removeListener("unpipe",a),r.removeListener("end",s),r.removeListener("end",b),r.removeListener("data",u),d=!0,l&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&l()}())}function s(){v("onend"),e.end()}let l;i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",a);let d=!1;function c(){d||(1===i.pipes.length&&i.pipes[0]===e?(v("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(v("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),r.pause()),l||(l=function(e,t){return function(){const r=e._readableState;r.awaitDrainWriters===t?(v("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(v("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),r.awaitDrainWriters&&0!==r.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(r,e),e.on("drain",l))}function u(t){v("ondata");const r=e.write(t);v("dest.write",r),!1===r&&c()}function f(t){if(v("onerror",t),b(),e.removeListener("error",f),0===e.listenerCount("error")){const r=e._writableState||e._readableState;r&&!r.errorEmitted?D(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",g),b()}function g(){v("onfinish"),e.removeListener("close",p),b()}function b(){v("unpipe"),r.unpipe(e)}return r.on("data",u),w(e,"error",f),e.once("close",p),e.once("finish",g),e.emit("pipe",r),!0===e.writableNeedDrain?i.flowing&&c():i.flowing||(v("pipe resume"),r.resume()),e},U.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const r=i(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},U.prototype.on=function(e,t){const r=b.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,v("on readable",i.length,i.reading),i.length?B(this):i.reading||n.nextTick(G,this))),r},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(e,t){const r=b.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(V,this),r},U.prototype.off=U.prototype.removeListener,U.prototype.removeAllListeners=function(e){const t=b.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(V,this),t},U.prototype.resume=function(){const e=this._readableState;return e.flowing||(v("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(z,e,t))}(this,e)),e[O]=!1,this},U.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[O]=!0,this},U.prototype.wrap=function(e){let t=!1;e.on("data",(r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{D(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const r=d(e);for(let n=1;n<r.length;n++){const t=r[n];void 0===this[t]&&"function"===typeof e[t]&&(this[t]=e[t].bind(e))}return this},U.prototype[f]=function(){return J(this)},U.prototype.iterator=function(e){return void 0!==e&&x(e,"options"),J(this,e)},l(U.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),l(W.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[O]},set(e){this[O]=!!e}}}),U._fromList=X,U.from=function(e,t){return L(U,e,t)},U.fromWeb=function(e,t){return ne().newStreamReadableFromReadableStream(e,t)},U.toWeb=function(e,t){return ne().newReadableStreamFromStreamReadable(e,t)},U.wrap=function(e,t){var r,n;return new U({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r,...t,destroy(t,r){E.destroyer(e,t),r(t)}}).wrap(e)}},43427:(e,t,r)=>{"use strict";const{MathFloor:n,NumberIsInteger:i}=r(81981),{ERR_INVALID_ARG_VALUE:o}=r(31693).codes;function a(e){return e?16:16384}e.exports={getHighWaterMark:function(e,t,r,s){const l=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,s,r);if(null!=l){if(!i(l)||l<0){throw new o(s?`options.${r}`:"options.highWaterMark",l)}return n(l)}return a(e.objectMode)},getDefaultHighWaterMark:a}},87782:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n,Symbol:i}=r(81981);e.exports=d;const{ERR_METHOD_NOT_IMPLEMENTED:o}=r(31693).codes,a=r(76531),{getHighWaterMark:s}=r(43427);n(d.prototype,a.prototype),n(d,a);const l=i("kCallback");function d(e){if(!(this instanceof d))return new d(e);const t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function c(e){"function"!==typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())}))}function u(){this._final!==c&&c.call(this)}d.prototype._final=c,d.prototype._transform=function(e,t,r){throw new o("_transform()")},d.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,((e,t)=>{e?r(e):(null!=t&&this.push(t),i.ended||o===n.length||n.length<n.highWaterMark?r():this[l]=r)}))},d.prototype._read=function(){if(this[l]){const e=this[l];this[l]=null,e()}}},8515:(e,t,r)=>{"use strict";const{Symbol:n,SymbolAsyncIterator:i,SymbolIterator:o,SymbolFor:a}=r(81981),s=n("kDestroyed"),l=n("kIsErrored"),d=n("kIsReadable"),c=n("kIsDisturbed"),u=a("nodejs.webstream.isClosedPromise"),h=a("nodejs.webstream.controllerErrorFunction");function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r;return!(!e||"function"!==typeof e.pipe||"function"!==typeof e.on||t&&("function"!==typeof e.pause||"function"!==typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function p(e){var t;return!(!e||"function"!==typeof e.write||"function"!==typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function g(e){return e&&(e._readableState||e._writableState||"function"===typeof e.write&&"function"===typeof e.on||"function"===typeof e.pipe&&"function"===typeof e.on)}function b(e){return!(!e||g(e)||"function"!==typeof e.pipeThrough||"function"!==typeof e.getReader||"function"!==typeof e.cancel)}function w(e){return!(!e||g(e)||"function"!==typeof e.getWriter||"function"!==typeof e.abort)}function y(e){return!(!e||g(e)||"object"!==typeof e.readable||"object"!==typeof e.writable)}function m(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[s]||null!==n&&void 0!==n&&n.destroyed)}function _(e){if(!p(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null===t||void 0===t||!t.errored)&&("boolean"!==typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)}function v(e,t){if(!f(e))return null;const r=e._readableState;return(null===r||void 0===r||!r.errored)&&("boolean"!==typeof(null===r||void 0===r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function S(e){return e&&null!=e[d]?e[d]:"boolean"!==typeof(null===e||void 0===e?void 0:e.readable)?null:!m(e)&&(f(e)&&e.readable&&!v(e))}function E(e){return"boolean"!==typeof(null===e||void 0===e?void 0:e.writable)?null:!m(e)&&(p(e)&&e.writable&&!_(e))}function R(e){return"boolean"===typeof e._closed&&"boolean"===typeof e._defaultKeepAlive&&"boolean"===typeof e._removedConnection&&"boolean"===typeof e._removedContLen}function A(e){return"boolean"===typeof e._sent100&&R(e)}e.exports={kDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[c])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:c,isErrored:function(e){var t,r,n,i,o,a,s,d,c,u;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=null!==(a=e[l])&&void 0!==a?a:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(s=e._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==n?n:null===(d=e._writableState)||void 0===d?void 0:d.errorEmitted)&&void 0!==r?r:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null===(u=e._writableState)||void 0===u?void 0:u.errored))},kIsErrored:l,isReadable:S,kIsReadable:d,kIsClosedPromise:u,kControllerErrorFunction:h,isClosed:function(e){if(!g(e))return null;if("boolean"===typeof e.closed)return e.closed;const t=e._writableState,r=e._readableState;return"boolean"===typeof(null===t||void 0===t?void 0:t.closed)||"boolean"===typeof(null===r||void 0===r?void 0:r.closed)?(null===t||void 0===t?void 0:t.closed)||(null===r||void 0===r?void 0:r.closed):"boolean"===typeof e._closed&&R(e)?e._closed:null},isDestroyed:m,isDuplexNodeStream:function(e){return!(!e||"function"!==typeof e.pipe||!e._readableState||"function"!==typeof e.on||"function"!==typeof e.write)},isFinished:function(e,t){return g(e)?!!m(e)||(!1===(null===t||void 0===t?void 0:t.readable)||!S(e))&&(!1===(null===t||void 0===t?void 0:t.writable)||!E(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"===typeof e[i]:!1===t?"function"===typeof e[o]:"function"===typeof e[i]||"function"===typeof e[o])},isReadableNodeStream:f,isReadableStream:b,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!==typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)},isReadableFinished:v,isReadableErrored:function(e){var t,r;return g(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:g,isWebStream:function(e){return b(e)||w(e)||y(e)},isWritable:E,isWritableNodeStream:p,isWritableStream:w,isWritableEnded:_,isWritableFinished:function(e,t){if(!p(e))return null;if(!0===e.writableFinished)return!0;const r=e._writableState;return(null===r||void 0===r||!r.errored)&&("boolean"!==typeof(null===r||void 0===r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return g(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"===typeof e._consuming&&"boolean"===typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:A,willEmitClose:function(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&A(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:y}},24213:(e,t,r)=>{const n=r(1426),{ArrayPrototypeSlice:i,Error:o,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:l,ObjectSetPrototypeOf:d,StringPrototypeToLowerCase:c,Symbol:u,SymbolHasInstance:h}=r(81981);e.exports=M,M.WritableState=x;const{EventEmitter:f}=r(47465),p=r(46514).Stream,{Buffer:g}=r(19778),b=r(48506),{addAbortSignal:w}=r(566),{getHighWaterMark:y,getDefaultHighWaterMark:m}=r(43427),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:v,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:R,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:T,ERR_UNKNOWN_ENCODING:P}=r(31693).codes,{errorOrDestroy:k}=b;function C(){}d(M.prototype,p.prototype),d(M,p);const N=u("kOnFinished");function x(e,t,n){"boolean"!==typeof n&&(n=t instanceof r(76531)),this.objectMode=!(!e||!e.objectMode),n&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",n):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=W.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,O(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[N]=[]}function O(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function M(e){const t=this instanceof r(76531);if(!t&&!a(M,this))return new M(e);this._writableState=new x(e,this,t),e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final),"function"===typeof e.construct&&(this._construct=e.construct),e.signal&&w(e.signal,this)),p.call(this,e),b.construct(this,(()=>{const e=this._writableState;e.writing||q(this,e),Z(this,e)}))}function L(e,t,r,i){const o=e._writableState;if("function"===typeof r)i=r,r=o.defaultEncoding;else{if(r){if("buffer"!==r&&!g.isEncoding(r))throw new P(r)}else r=o.defaultEncoding;"function"!==typeof i&&(i=C)}if(null===t)throw new I;if(!o.objectMode)if("string"===typeof t)!1!==o.decodeStrings&&(t=g.from(t,r),r="buffer");else if(t instanceof g)r="buffer";else{if(!p._isUint8Array(t))throw new _("chunk",["string","Buffer","Uint8Array"],t);t=p._uint8ArrayToBuffer(t),r="buffer"}let a;return o.ending?a=new T:o.destroyed&&(a=new R("write")),a?(n.nextTick(i,a),k(e,a,!0),a):(o.pendingcb++,function(e,t,r,n,i){const o=t.objectMode?1:r.length;t.length+=o;const a=t.length<t.highWaterMark;a||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==C&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1);return a&&!t.errored&&!t.destroyed}(e,o,t,r,i))}function j(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new R("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function D(e,t,r,n){--t.pendingcb,n(r),F(t),k(e,r)}function W(e,t){const r=e._writableState,i=r.sync,o=r.writecb;"function"===typeof o?(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(D,e,r,t,o):D(e,r,t,o)):(r.buffered.length>r.bufferedIndex&&q(e,r),i?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===o?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:o,stream:e,state:r},n.nextTick(U,r.afterWriteTickInfo)):$(e,r,1,o))):k(e,new S)}function U(e){let{stream:t,state:r,count:n,cb:i}=e;return r.afterWriteTickInfo=null,$(t,r,n,i)}function $(e,t,r,n){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&F(t),Z(e,t)}function F(e){if(e.writing)return;for(let i=e.bufferedIndex;i<e.buffered.length;++i){var t;const{chunk:r,callback:n}=e.buffered[i],o=e.objectMode?1:r.length;e.length-=o,n(null!==(t=e.errored)&&void 0!==t?t:new R("write"))}const r=e[N].splice(0);for(let i=0;i<r.length;i++){var n;r[i](null!==(n=e.errored)&&void 0!==n?n:new R("end"))}O(e)}function q(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:r,bufferedIndex:n,objectMode:o}=t,a=r.length-n;if(!a)return;let s=n;if(t.bufferProcessing=!0,a>1&&e._writev){t.pendingcb-=a-1;const n=t.allNoop?C:e=>{for(let t=s;t<r.length;++t)r[t].callback(e)},o=t.allNoop&&0===s?r:i(r,s);o.allBuffers=t.allBuffers,j(e,t,!0,t.length,o,"",n),O(t)}else{do{const{chunk:n,encoding:i,callback:a}=r[s];r[s++]=null;j(e,t,!1,o?1:n.length,n,i,a)}while(s<r.length&&!t.writing);s===r.length?O(t):s>256?(r.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function B(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function H(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let r=!1;function i(i){if(r)k(e,null!==i&&void 0!==i?i:S());else if(r=!0,t.pendingcb--,i){const r=t[N].splice(0);for(let e=0;e<r.length;e++)r[e](i);k(e,i,t.sync)}else B(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,n.nextTick(K,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(o){i(o)}t.sync=!1}(e,t)))}function Z(e,t,r){B(t)&&(H(e,t),0===t.pendingcb&&(r?(t.pendingcb++,n.nextTick(((e,t)=>{B(t)?K(e,t):t.pendingcb--}),e,t)):B(t)&&(t.pendingcb++,K(e,t))))}function K(e,t){t.pendingcb--,t.finished=!0;const r=t[N].splice(0);for(let n=0;n<r.length;n++)r[n]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}x.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},s(x.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(M,h,{__proto__:null,value:function(e){return!!a(this,e)||this===M&&(e&&e._writableState instanceof x)}}),M.prototype.pipe=function(){k(this,new E)},M.prototype.write=function(e,t,r){return!0===L(this,e,t,r)},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||q(this,e))},M.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=c(e)),!g.isEncoding(e))throw new P(e);return this._writableState.defaultEncoding=e,this},M.prototype._write=function(e,t,r){if(!this._writev)throw new v("_write()");this._writev([{chunk:e,encoding:t}],r)},M.prototype._writev=null,M.prototype.end=function(e,t,r){const i=this._writableState;let a;if("function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e){const r=L(this,e,t);r instanceof o&&(a=r)}return i.corked&&(i.corked=1,this.uncork()),a||(i.errored||i.ending?i.finished?a=new A("end"):i.destroyed&&(a=new R("end")):(i.ending=!0,Z(this,i,!0),i.ended=!0)),"function"===typeof r&&(a||i.finished?n.nextTick(r,a):i[N].push(r)),this},l(M.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const V=b.destroy;let G;function z(){return void 0===G&&(G={}),G}M.prototype.destroy=function(e,t){const r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[N].length)&&n.nextTick(F,r),V.call(this,e,t),this},M.prototype._undestroy=b.undestroy,M.prototype._destroy=function(e,t){t(e)},M.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},M.fromWeb=function(e,t){return z().newStreamWritableFromWritableStream(e,t)},M.toWeb=function(e){return z().newWritableStreamFromStreamWritable(e)}},96168:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:d,NumberMIN_SAFE_INTEGER:c,NumberParseInt:u,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:b}=r(81981),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:v,ERR_UNKNOWN_SIGNAL:S}}=r(31693),{normalizeEncoding:E}=r(10224),{isAsyncFunction:R,isArrayBufferView:A}=r(10224).types,I={};const T=/^[0-7]+$/;const P=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;if("number"!==typeof e)throw new m(t,"number",e);if(!s(e))throw new v(t,"an integer",e);if(e<r||e>n)throw new v(t,`>= ${r} && <= ${n}`,e)})),k=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-2147483648,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2147483647;if("number"!==typeof e)throw new m(t,"number",e);if(!s(e))throw new v(t,"an integer",e);if(e<r||e>n)throw new v(t,`>= ${r} && <= ${n}`,e)})),C=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"!==typeof e)throw new m(t,"number",e);if(!s(e))throw new v(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new v(t,`>= ${n} && <= ${i}`,e)}));function N(e,t){if("string"!==typeof e)throw new m(t,"string",e)}const x=w(((e,t,r)=>{if(!i(r,e)){const n=o(a(r,(e=>"string"===typeof e?`'${e}'`:p(e))),", ");throw new _(t,e,"must be one of: "+n)}}));function O(e,t){if("boolean"!==typeof e)throw new m(t,"boolean",e)}function M(e,t,r){return null!=e&&h(e,t)?e[t]:r}const L=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=M(r,"allowArray",!1),o=M(r,"allowFunction",!1);if(!M(r,"nullable",!1)&&null===e||!i&&n(e)||"object"!==typeof e&&(!o||"function"!==typeof e))throw new m(t,"Object",e)})),j=w(((e,t)=>{if(null!=e&&"object"!==typeof e&&"function"!==typeof e)throw new m(t,"a dictionary",e)})),D=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!n(e))throw new m(t,"Array",e);if(e.length<r){throw new _(t,e,`must be longer than ${r}`)}}));const W=w((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffer";if(!A(e))throw new m(t,["Buffer","TypedArray","DataView"],e)}));const U=w(((e,t)=>{if(void 0!==e&&(null===e||"object"!==typeof e||!("aborted"in e)))throw new m(t,"AbortSignal",e)})),$=w(((e,t)=>{if("function"!==typeof e)throw new m(t,"Function",e)})),F=w(((e,t)=>{if("function"!==typeof e||R(e))throw new m(t,"Function",e)})),q=w(((e,t)=>{if(void 0!==e)throw new m(t,"undefined",e)}));const B=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function H(e,t){if("undefined"===typeof e||!f(B,e))throw new _(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if("undefined"===typeof e&&(e=r),"string"===typeof e){if(null===f(T,e))throw new _(t,e,"must be a 32-bit unsigned integer or an octal string");e=u(e,8)}return C(e,t),e},validateArray:D,validateStringArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)N(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)O(e[r],`${t}[${r}]`)},validateBoolean:O,validateBuffer:W,validateDictionary:j,validateEncoding:function(e,t){const r=E(t),n=e.length;if("hex"===r&&n%2!==0)throw new _("encoding",t,`is invalid for data of length ${n}`)},validateFunction:$,validateInt32:k,validateInteger:P,validateNumber:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if("number"!==typeof e)throw new m(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&l(e))throw new v(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:L,validateOneOf:x,validatePlainFunction:F,validatePort:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Port",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"!==typeof e&&"string"!==typeof e||"string"===typeof e&&0===b(e).length||+e!==+e>>>0||e>65535||0===e&&!r)throw new y(t,e,r);return 0|e},validateSignalName:function(e){if(N(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"signal"),void 0===I[e]){if(void 0!==I[g(e)])throw new S(e+" (signals must use all capital letters)");throw new S(e)}},validateString:N,validateUint32:C,validateUndefined:q,validateUnion:function(e,t,r){if(!i(r,e))throw new m(t,`('${o(r,"|")}')`,e)},validateAbortSignal:U,validateLinkHeaderValue:function(e){if("string"===typeof e)return H(e,"hints"),e;if(n(e)){const t=e.length;let r="";if(0===t)return r;for(let n=0;n<t;n++){const i=e[n];H(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new _("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},35954:(e,t,r)=>{"use strict";const n=r(88162),i=r(3e3),o=n.Readable.destroy;e.exports=n.Readable,e.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,e.exports._isUint8Array=n._isUint8Array,e.exports.isDisturbed=n.isDisturbed,e.exports.isErrored=n.isErrored,e.exports.isReadable=n.isReadable,e.exports.Readable=n.Readable,e.exports.Writable=n.Writable,e.exports.Duplex=n.Duplex,e.exports.Transform=n.Transform,e.exports.PassThrough=n.PassThrough,e.exports.addAbortSignal=n.addAbortSignal,e.exports.finished=n.finished,e.exports.destroy=n.destroy,e.exports.destroy=o,e.exports.pipeline=n.pipeline,e.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get:()=>i}),e.exports.Stream=n.Stream,e.exports.default=e.exports},31693:(e,t,r)=>{"use strict";const{format:n,inspect:i,AggregateError:o}=r(10224),a=globalThis.AggregateError||o,s=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],d=/^([A-Z][a-z0-9]*)+$/,c={};function u(e,t){if(!e)throw new c.ERR_INTERNAL_ASSERTION(t)}function h(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,r){r||(r=Error);class i extends r{constructor(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];super(function(e,t,r){if("function"===typeof t)return u(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const i=(t.match(/%[dfijoOs]/g)||[]).length;return u(i===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),0===r.length?t:n(t,...r)}(e,t,i))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[s]=!0,c[e]=i}function p(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==t&&"object"!==typeof t)throw new c.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",((e,t,r)=>{u("string"===typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const o=[],a=[],s=[];for(const i of t)u("string"===typeof i,"All expected entries have to be of type string"),l.includes(i)?o.push(i.toLowerCase()):d.test(i)?a.push(i):(u("object"!==i,'The value "object" should be written as "Object"'),s.push(i));if(a.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),a.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();n+=`one of type ${o.join(", ")}, or ${e}`}}(a.length>0||s.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();n+=`an instance of ${a.join(", ")}, or ${e}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();n+=`one of ${s.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"===typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"===typeof r){var c;if(null!==(c=r.constructor)&&void 0!==c&&c.name)n+=`. Received an instance of ${r.constructor.name}`;else{n+=`. Received ${i(r,{depth:-1})}`}}else{let e=i(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n}),TypeError),f("ERR_INVALID_ARG_VALUE",(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid",n=i(t);n.length>128&&(n=n.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`}),TypeError),f("ERR_INVALID_RETURN_VALUE",((e,t,r)=>{var n;return`Expected ${e} to be returned from the "${t}" function but got ${null!==r&&void 0!==r&&null!==(n=r.constructor)&&void 0!==n&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`}),TypeError),f("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n;u(t.length>0,"At least one arg needs to be specified");const i=t.length;switch(t=(Array.isArray(t)?t:[t]).map((e=>`"${e}"`)).join(" or "),i){case 1:n+=`The ${t[0]} argument`;break;case 2:n+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const e=t.pop();n+=`The ${t.join(", ")}, and ${e} arguments`}}return`${n} must be specified`}),TypeError),f("ERR_OUT_OF_RANGE",((e,t,r)=>{let n;return u(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32?n=h(String(r)):"bigint"===typeof r?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=h(n)),n+="n"):n=i(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`}),RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:g,aggregateTwoErrors:p((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new a([t,e],t.message);return r.code=t.code,r}return e||t})),hideStackFrames:p,codes:c}},81981:e=>{"use strict";e.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error:Error,FunctionPrototypeCall(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e.call(t,...n)},FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Uint8Array:Uint8Array}},10224:(e,t,r)=>{"use strict";const n=r(19778),i=Object.getPrototypeOf((async function(){})).constructor,o=globalThis.Blob||n.Blob,a="undefined"!==typeof o?function(e){return e instanceof o}:function(e){return!1};class s extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}},createDeferredPromise:function(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}},promisify:e=>new Promise(((t,r)=>{e((function(e){if(e)return r(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t(...i)}))})),debuglog:()=>function(){},format(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.replace(/%([sdifj])/g,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,o]=t;const a=r.shift();if("f"===o)return a.toFixed(6);if("j"===o)return JSON.stringify(a);if("s"===o&&"object"===typeof a){return`${a.constructor!==Object?a.constructor.name:""} {}`.trim()}return a.toString()}))},inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof i,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:a},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},88162:(e,t,r)=>{const{Buffer:n}=r(19778),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:a}=r(81981),{promisify:{custom:s}}=r(10224),{streamReturningOperators:l,promiseReturningOperators:d}=r(96553),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=r(31693),u=r(30775),{pipeline:h}=r(33887),{destroyer:f}=r(48506),p=r(84288),g=r(3e3),b=r(8515),w=e.exports=r(46514).Stream;w.isDisturbed=b.isDisturbed,w.isErrored=b.isErrored,w.isReadable=b.isReadable,w.Readable=r(12716);for(const _ of o(l)){const v=l[_];function y(){if(new.target)throw c();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return w.Readable.from(a(v,this,t))}i(y,"name",{__proto__:null,value:v.name}),i(y,"length",{__proto__:null,value:v.length}),i(w.Readable.prototype,_,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}for(const S of o(d)){const E=d[S];function y(){if(new.target)throw c();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(E,this,t)}i(y,"name",{__proto__:null,value:E.name}),i(y,"length",{__proto__:null,value:E.length}),i(w.Readable.prototype,S,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}w.Writable=r(24213),w.Duplex=r(76531),w.Transform=r(87782),w.PassThrough=r(2708),w.pipeline=h;const{addAbortSignal:m}=r(566);w.addAbortSignal=m,w.finished=p,w.destroy=f,w.compose=u,i(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),i(h,s,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),i(p,s,{__proto__:null,enumerable:!0,get:()=>g.finished}),w.Stream=w,w._isUint8Array=function(e){return e instanceof Uint8Array},w._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}},3e3:(e,t,r)=>{"use strict";const{ArrayPrototypePop:n,Promise:i}=r(81981),{isIterable:o,isNodeStream:a,isWebStream:s}=r(8515),{pipelineImpl:l}=r(33887),{finished:d}=r(84288);r(88162),e.exports={finished:d,pipeline:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new i(((e,r)=>{let i,d;const c=t[t.length-1];if(c&&"object"===typeof c&&!a(c)&&!o(c)&&!s(c)){const e=n(t);i=e.signal,d=e.end}l(t,((t,n)=>{t?r(t):e(n)}),{signal:i,end:d})}))}}},98530:(e,t,r)=>{"use strict";r.d(t,{SolanaWalletAdapter:()=>Gt});var n=r(1413),i=r(64572),o=r(52220),a=r(35954),s=r(47465),l=r(11053),d=r.n(l),c=r(93137),u=r(69578),h=r.n(u),f=r(14876),p=r.n(f),g=r(99306),b=r.n(g);function w(){}const y="ACK";class m extends a.Duplex{constructor(e){let{name:t,target:r,targetWindow:n=window,targetOrigin:o="*"}=e;if(super({objectMode:!0}),(0,i.Z)(this,"_init",void 0),(0,i.Z)(this,"_haveSyn",void 0),(0,i.Z)(this,"_name",void 0),(0,i.Z)(this,"_target",void 0),(0,i.Z)(this,"_targetWindow",void 0),(0,i.Z)(this,"_targetOrigin",void 0),(0,i.Z)(this,"_onMessage",void 0),(0,i.Z)(this,"_synIntervalId",void 0),!t||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=r,this._targetWindow=n,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write("BRK",null,w),this._haveSyn=!1,this._init=!1}_handShake(){this._write("SYN",null,w),this.cork()}_onData(e){if(this._init)if("BRK"===e)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}else"SYN"===e?(this._haveSyn=!0,this._write(y,null,w)):e===y&&(this._init=!0,this._haveSyn||this._write(y,null,w),this.uncork())}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;"*"!==this._targetOrigin&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||"object"!==typeof t||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,r){this._postMessage(e),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}function _(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout((()=>{throw n}))}}class v extends s.EventEmitter{emit(e){let t="error"===e;const r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(t){let e;if(i.length>0&&([e]=i),e instanceof Error)throw e;const t=new Error("Unhandled error."+(e?` (${e.message})`:""));throw t.context=e,t}const a=r[e];if(void 0===a)return!1;if("function"===typeof a)_(a,this,i);else{const e=a.length,t=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(a);for(let r=0;r<e;r+=1)_(t[r],this,i)}return!0}}class S extends Error{constructor(e){let{code:t,message:r,data:n}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!r||"string"!==typeof r)throw new Error("message must be string");super(r),(0,i.Z)(this,"code",void 0),(0,i.Z)(this,"data",void 0),this.code=t,void 0!==n&&(this.data=n)}toString(){return d()({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const E=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n,i)=>{n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)}};function R(){const e={};const t=new v;const r=new a.Duplex({objectMode:!0,read:function(){return!1},write:function(r,n,i){let o;try{!r.id?function(e){t.emit("notification",e)}(r):function(t){const r=e[t.id];if(!r)throw new Error(`StreamMiddleware - Unknown response id "${t.id}"`);delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}(r)}catch(a){o=a}i(o)}});return{events:t,middleware:(t,n,i,o)=>{r.push(t),e[t.id]={req:t,res:n,next:i,end:o}},stream:r}}class A extends v{constructor(){super(),(0,i.Z)(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){const n=[];let i=null,o=!1;for(const a of r)if([i,o]=await A._runMiddleware(e,t,a,n),o)break;return[i,o,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((i=>{const o=e=>{const r=e||t.error;r&&(t.error=(0,c.Xy)(r)),i([r,!0])},a=e=>{t.error?o(t.error):(e&&("function"!==typeof e&&o(new S({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),n.push(e)),i([null,!1]))};try{r(e,t,a,o)}catch(s){o(s)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new S({code:-32603,message:"Response has no error or result for request"});if(!r)throw new S({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!==typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[i,o,a]=await A._runAllMiddleware(e,t,this._middleware);return o?(await A._runReturnHandlers(a),n(i)):r((async e=>{try{await A._runReturnHandlers(a)}catch(t){return e(t)}return e()}))}catch(i){return n(i)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!==typeof e){const e=new S({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!==typeof e.method){const r=new S({code:-32603,message:"method must be string"});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=(0,n.Z)({},e),i={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,i)}catch(a){o=a}return o&&(delete i.result,i.error||(i.error=(0,c.Xy)(o))),t(o,i)}async _processRequest(e,t){const[r,n,i]=await A._runAllMiddleware(e,t,this._middleware);if(A._checkForCompletion(e,t,n),await A._runReturnHandlers(i),r)throw r}}class I extends a.Duplex{constructor(e){let{parent:t,name:r}=e;super({objectMode:!0}),(0,i.Z)(this,"_parent",void 0),(0,i.Z)(this,"_name",void 0),this._parent=t,this._name=r}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}const T=Symbol("IGNORE_SUBSTREAM");class P extends a.Duplex{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super((0,n.Z)((0,n.Z)({},e),{},{objectMode:!0})),(0,i.Z)(this,"_substreams",void 0),(0,i.Z)(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new I({parent:this,name:e});return this._substreams[e]=t,function(e,t){const r=p()(t);h()(e,{readable:!1},r),h()(e,{writable:!1},r)}(this,(e=>t.destroy(e||void 0))),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=T}_read(){}_write(e,t,r){const{name:n,data:i}=e;if(!n)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();const o=this._substreams[n];return o?(o!==T&&o.push(i),r()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),r())}}var k=r(99515);r(14804),r(65592);function C(e){let t=e;if("string"!==typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const N=e=>{if("string"!==typeof e)throw new Error(`hex argument type ${typeof e} must be of type string`);if(!e.startsWith("0x"))throw new Error(`prefixed hex input should start with 0x, got ${e.substring(0,2)}`);(e=e.slice(2)).length%2!==0&&(e=C(e));const t=e.length/2,r=new Uint8Array(t);for(let n=0;n<t;n++){const t=parseInt(e.slice(2*n,2*(n+1)),16);r[n]=t}return r};BigInt("0xffffffffffffffff"),BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),k.k.CURVE.n,k.k.CURVE.n,BigInt(2),BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),N("0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"),N("0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"),N("0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421"),Uint8Array.from([128]),BigInt(1e9);Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r(31417);BigInt(0);new Uint8Array(0);var x,O,M;!function(e){e.String="string",e.Bytes="view",e.Number="number"}(x||(x={})),function(e){e.String="string",e.Bytes="view",e.JSON="json"}(O||(O={})),function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(M||(M={}));r(80608);r(25102);r(84471);var L=r(62895),j=r.n(L);r(57381);const D=j().getLogger("http-helpers");D.setLevel(L.levels.INFO);let W="torus-default";function U(e){W=e}r(5524),r(763),r(19778).Buffer;const $="iframe_status",F="create_window",q="close_window",B="user_logged_in",H="user_logged_out",Z={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",OPENED_WINDOW:"opened_window",CLOSED_WINDOW:"closed_window",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui"},K="wallet_get_provider_state",V="wallet_accounts_changed",G="wallet_chain_changed",z="wallet_unlock_state_changed";class Y extends Error{}var J=r(27037),X=r(78262),Q=r.n(X),ee=r(19778).Buffer;function te(e){return null!==e&&"object"===typeof e&&"function"===typeof e.pipe}function re(e){return function(e){return te(e)&&!1!==e.writable&&"function"===typeof e._write&&"object"===typeof e._writableState}(e)&&function(e){return te(e)&&!1!==e.readable&&"function"===typeof e._read&&"object"===typeof e._readableState}(e)}var ne={disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},ie={connected:e=>`Torus: Connected to chain with ID "${e}".`};const oe={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},ae={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"};var se={supportedVerifierList:["google","reddit","discord"],api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xf6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"\u7d99\u7d9a\u3059\u308b",actionRequired:"\u8a8d\u8a3c\u304c\u5fc5\u8981\u3067\u3059",pendingAction:"\u7d9a\u884c\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u7d9a\u884c\u3057\u307e\u3059",cookiesRequired:"\u5fc5\u8981\u306a\u30af\u30c3\u30ad\u30fc",enableCookies:"Torus\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u306e\u8a2d\u5b9a\u3067Cookie\u3092\u6709\u52b9\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",clickHere:"\u8a73\u3057\u304f\u306f"}},ko:{embed:{continue:"\uacc4\uc18d\ud558\ub2e4",actionRequired:"\uc2b9\uc778 \ud544\uc694",pendingAction:"\ud31d\uc5c5\uc5d0\uc11c \uc694\uccad\uc744 \uc9c4\ud589\ud558\ub824\uba74 \uacc4\uc18d\uc744 \ud074\ub9ad\ud558\uc2ed\uc2dc\uc624.",cookiesRequired:"\ucfe0\ud0a4 \ud544\uc694",enableCookies:"\ube0c\ub77c\uc6b0\uc800 \ud658\uacbd \uc124\uc815\uc5d0\uc11c \ucfe0\ud0a4\ub97c \ud65c\uc131\ud654\ud558\uc5ec Torus\uc5d0 \uc561\uc138\uc2a4\ud558\uc2ed\uc2dc\uc624.",clickHere:"\ub354 \ub9ce\uc740 \uc815\ubcf4"}},zh:{embed:{continue:"\u7ee7\u7eed",actionRequired:"\u9700\u8981\u6388\u6743",pendingAction:"\u5355\u51fb\u7ee7\u7eed\u4ee5\u5728\u5f39\u51fa\u7a97\u53e3\u4e2d\u7ee7\u7eed\u60a8\u7684\u8bf7\u6c42",cookiesRequired:"\u5fc5\u586bCookie",enableCookies:"\u8bf7\u5728\u60a8\u7684\u6d4f\u89c8\u5668\u9996\u9009\u9879\u4e2d\u542f\u7528cookie\u4ee5\u8bbf\u95eeTorus\u3002",clickHere:"\u66f4\u591a\u4fe1\u606f"}}},prodTorusUrl:"",localStorageKeyPrefix:"torus-"},le=j().getLogger("solana-embed");const de=()=>Math.random().toString(36).slice(2),ce=async e=>{let t,r;switch(e){case"testing":t="https://solana-testing.tor.us",r="debug";break;case"development":t="http://localhost:8080",r="debug";break;default:t="https://solana.tor.us",r="error"}return{torusUrl:t,logLevel:r}},ue={height:660,width:375},he={height:740,width:1315},fe={height:700,width:1200},pe={height:600,width:400};function ge(e){let{width:t,height:r}=e;const n=void 0!==window.screenLeft?window.screenLeft:window.screenX,i=void 0!==window.screenTop?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,s=Math.abs((o-t)/2/1+n);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${r/1},width=${t/1},top=${Math.abs((a-r)/2/1+i)},left=${s}`}class be extends v{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:n="provider"}=t;if(super(),(0,i.Z)(this,"isTorus",void 0),(0,i.Z)(this,"_rpcEngine",void 0),(0,i.Z)(this,"jsonRpcConnectionEvents",void 0),(0,i.Z)(this,"_state",void 0),!re(e))throw new Error(ne.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new P;b()(e,o,e,this._handleStreamDisconnect.bind(this,"Torus")),o.ignoreStream("phishing");const a=R();b()(a.stream,o.createStream(n),a.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const s=new A;var l;s.push(((e,t,r,n)=>{const i=e.id,o=Math.random().toString(36).slice(2);e.id=o,t.id=o,r((r=>{e.id=i,t.id=i,r()}))})),s.push(((e,t,r)=>{"string"===typeof e.method&&e.method||(t.error=J.Sy.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r((e=>{const{error:r}=t;return r?(le.error(`Torus - RPC Error: ${r.message}`,r),e()):e()}))})),s.push((l={origin:location.origin},function(e,t,r){r((r=>{t.error&&j().warn("Error in RPC response:\n",t),e.isTorusInternal||(j().info(`RPC (${l.origin}):`,e,"->",t),r())}))})),s.push(a.middleware),this._rpcEngine=s,this.jsonRpcConnectionEvents=a.events}async request(e){if(!e||"object"!==typeof e||Array.isArray(e))throw J.Sy.rpc.invalidRequest({message:ne.invalidRequestArgs(),data:e});const{method:t,params:r}=e;if("string"!==typeof t||0===t.length)throw J.Sy.rpc.invalidRequest({message:ne.invalidRequestMethod(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!==typeof r||null===r))throw J.Sy.rpc.invalidRequest({message:ne.invalidRequestParams(),data:e});return new Promise(((e,n)=>{this._rpcRequest({method:t,params:r},E(e,n))}))}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise(((t,r)=>{this._rpcRequest(e,E(t,r))}))}_handleStreamDisconnect(e,t){!function(e,t,r){let n=`Torus: Lost connection to "${e}".`;null!==t&&void 0!==t&&t.stack&&(n+=`\n${t.stack}`),le.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const we=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild};function ye(e){return void 0===e.version}class me extends v{constructor(e){let{url:t,target:r,features:n,timeout:o=3e4}=e;super(),(0,i.Z)(this,"url",void 0),(0,i.Z)(this,"target",void 0),(0,i.Z)(this,"features",void 0),(0,i.Z)(this,"window",void 0),(0,i.Z)(this,"windowTimer",void 0),(0,i.Z)(this,"iClosedWindow",void 0),(0,i.Z)(this,"timeout",void 0),this.url=t,this.target=r||"_blank",this.features=n||ge(fe),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=o,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval((()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout((()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0}),this.timeout)),void 0===this.window&&clearInterval(this.windowTimer)}),500))}open(){var e;return this.window=window.open(this.url.href,this.target,this.features),null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class _e extends be{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:o}),(0,i.Z)(this,"embedTranslations",void 0),(0,i.Z)(this,"torusUrl",void 0),(0,i.Z)(this,"dappStorageKey",void 0),(0,i.Z)(this,"windowRefs",void 0),(0,i.Z)(this,"tryWindowHandle",void 0),(0,i.Z)(this,"torusAlertContainer",void 0),(0,i.Z)(this,"torusIframe",void 0),this._state=(0,n.Z)({},_e._defaultState),this.torusUrl="",this.dappStorageKey="";const a=se.translations[(()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(se.translations,t[0])?t[0]:"en",e})()];this.embedTranslations=a.embed,this.windowRefs={},this.on("connect",(()=>{this._state.isConnected=!0}));this.jsonRpcConnectionEvents.on("notification",(e=>{const{method:t,params:r}=e;if(t===$){const{isFullScreen:e,rid:t}=r;this._displayIframe({isFull:e,rid:t})}else if(t===F){const{windowId:e,url:t}=r;this._createPopupBlockAlert(e,t)}else if(t===q)this._handleCloseWindow(r);else if(t===B){const{currentLoginProvider:e}=r;this._state.isLoggedIn=!0,this._state.currentLoginProvider=e}else t===H&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())}))}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:r,torusAlertContainer:n,torusIframe:i}=e;this.torusUrl=t,this.dappStorageKey=r,this.torusAlertContainer=n,this.torusIframe=i,this.torusIframe.addEventListener("load",(()=>{this._state.isIFrameFullScreen||this._displayIframe()}));const{currentLoginProvider:o,isLoggedIn:a}=await this.request({method:Z.GET_PROVIDER_STATE,params:[]});this._handleConnect(o,a)}catch(t){le.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{le.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:r,features:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(i.hash?i.hash+=`&dappStorageKey=${this.dappStorageKey}`:i.hash=`#dappStorageKey=${this.dappStorageKey}`);const o=new me({url:i,target:r,features:n});o.open(),o.window?(this.windowRefs[e]=o,this.request({method:Z.OPENED_WINDOW,params:{windowId:e}}),o.once("close",(()=>{delete this.windowRefs[e],this.request({method:Z.CLOSED_WINDOW,params:{windowId:e}})}))):this._createPopupBlockAlert(e,i.href)}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r={};if(e)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this._state.torusWidgetVisibility?"block":"none",r.height="70px",r.width="70px",this._state.buttonPosition){case ae.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case ae.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case ae.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case ae.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto"}Object.assign(this.torusIframe.style,r),this._state.isIFrameFullScreen=e,this.request({method:Z.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const r=t,n=e;Array.isArray(n)||n.jsonrpc||(n.jsonrpc="2.0"),this.tryWindowHandle(n,r)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),le.debug(ie.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new J.Cg(1013,t||ne.disconnected()),le.debug(r)):(r=new J.Cg(1011,t||ne.permanentlyDisconnected()),le.error(r),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const r=this.getLogoUrl(),n=we(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${r}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),i=we(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),o=we('<div id="torusAlert__btn-container"></div>');o.appendChild(i),n.appendChild(o);(()=>{this.torusAlertContainer.appendChild(n)})(),(()=>{i.addEventListener("click",(()=>{this._handleWindow(e,{url:t,target:"_blank",features:ge(pe)}),n.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")}))})(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}(0,i.Z)(_e,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class ve extends be{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:o}),(0,i.Z)(this,"chainId",void 0),(0,i.Z)(this,"selectedAddress",void 0),(0,i.Z)(this,"tryWindowHandle",void 0),this._state=(0,n.Z)({},ve._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",(()=>{this._state.isConnected=!0}));this.jsonRpcConnectionEvents.on("notification",(e=>{const{method:t,params:r}=e;t===V?this._handleAccountsChanged(r):t===z?this._handleUnlockStateChanged(r):t===G&&this._handleChainChanged(r)}))}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:r}=await this.request({method:K,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){le.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{le.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t;const i=e;if(!Array.isArray(i))if(i.jsonrpc||(i.jsonrpc="2.0"),"solana_accounts"===i.method||"solana_requestAccounts"===i.method)n=(e,n)=>{this._handleAccountsChanged(n.result||[],"solana_accounts"===i.method,r),t(e,n)};else if("wallet_getProviderState"===i.method)return void this._rpcEngine.handle(e,n);this.tryWindowHandle(i,n)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),le.debug(ie.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new J.Cg(1013,t||ne.disconnected()),le.debug(r)):(r=new J.Cg(1011,t||ne.permanentlyDisconnected()),le.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleAccountsChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;Array.isArray(n)||(le.error("Torus: Received non-array accounts parameter. Please report this bug.",n),n=[]);for(const i of e)if("string"!==typeof i){le.error("Torus: Received non-string account. Please report this bug.",e),n=[];break}Q()(this._state.accounts,n)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&le.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',n),this._state.accounts=n,this.emit("accountsChanged",n)),this.selectedAddress!==n[0]&&(this.selectedAddress=n[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?"loading"===e?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId))):le.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e})}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"boolean"===typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[])):le.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t})}}function Se(e){return new Promise(((t,r)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(n){r(n)}}))}(0,i.Z)(ve,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const Ee=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function Re(e){try{const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await Se(r.href)?r.href:(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find((e=>Boolean(e.href))),r&&await Se(r.href)?r.href:"")}catch(t){return""}}const Ae=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Ie=[Z.SET_PROVIDER],Te=function(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){const e=r;return e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}("localStorage");!async function(){try{if("undefined"===typeof document)return;const e=document.createElement("link"),{torusUrl:t}=await ce("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){le.warn(e)}}();class Pe{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,"isInitialized",void 0),(0,i.Z)(this,"torusAlert",void 0),(0,i.Z)(this,"modalZIndex",void 0),(0,i.Z)(this,"alertZIndex",void 0),(0,i.Z)(this,"requestedLoginProvider",void 0),(0,i.Z)(this,"provider",void 0),(0,i.Z)(this,"communicationProvider",void 0),(0,i.Z)(this,"dappStorageKey",void 0),(0,i.Z)(this,"isTopupHidden",!1),(0,i.Z)(this,"torusAlertContainer",void 0),(0,i.Z)(this,"torusUrl",void 0),(0,i.Z)(this,"torusIframe",void 0),(0,i.Z)(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return!!this.communicationProvider&&this.communicationProvider.isLoggedIn}async init(){let{buildEnv:e=oe.PRODUCTION,enableLogging:t=!1,network:r,showTorusButton:n=!1,useLocalStorage:i=!1,buttonPosition:o=ae.BOTTOM_LEFT,apiKey:a="torus-default",extraParams:s={},whiteLabel:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");U(a);const{torusUrl:d,logLevel:c}=await ce(e);le.enableAll(),le.info(d,"url loaded"),le.info("Solana Embed Version :2.0.0"),this.torusUrl=d,le.setDefaultLevel(c),t?le.enableAll():le.disableAll();const u=this.handleDappStorageKey(i),h=new URL(d);h.pathname.endsWith("/")?h.pathname+="frame":h.pathname+="/frame";const f=new URLSearchParams;return u&&f.append("dappStorageKey",u),f.append("origin",window.location.origin),h.hash=f.toString(),this.torusIframe=we(`<iframe\n        id="torusIframe"\n        class="torusIframe"\n        src="${h.href}"\n        style="display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"\n      ></iframe>`),this.torusAlertContainer=we(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=we(`<link href="${d}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise(((e,t)=>{try{this.torusIframe.addEventListener("load",(async()=>{const t=await(async()=>({name:Ee(window),icon:await Re(window)}))();this.torusIframe.contentWindow.postMessage({buttonPosition:o,apiKey:a,network:r,dappMetadata:t,extraParams:s,whiteLabel:l},h.origin),await this._setupWeb3({torusUrl:d}),n&&this.showTorusButton(),null!==l&&void 0!==l&&l.topupHide?this.isTopupHidden=l.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,e()})),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(i){t(i)}}))}async login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise(((t,r)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},E(t,r))}));if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw le.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:r}=e,{success:n}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:r}});if(!n)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:Z.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(e){return e instanceof Element||e instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:Z.SET_PROVIDER,params:(0,n.Z)({},e)})}async showWallet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await this.communicationProvider.request({method:Z.WALLET_INSTANCE_ID,params:[]}),n=e?`/${e}`:"",i=new URL(`${this.torusUrl}/wallet${n}`);i.searchParams.append("instanceId",r),Object.keys(t).forEach((e=>{i.searchParams.append(e,t[e])})),this.dappStorageKey&&(i.hash=`#dappStorageKey=${this.dappStorageKey}`);new me({url:i,features:ge(he)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:Z.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const r=de();this.communicationProvider._handleWindow(r);return await this.communicationProvider.request({method:Z.TOPUP,params:{provider:e,params:t,windowId:r}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=ye(e),r=t?e.serialize({requireAllSignatures:!1}).toString("hex"):ee.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:r,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const r=ye(e),n=r?e.serialize({requireAllSignatures:!1}).toString("hex"):ee.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:n,options:t,isLegacyTransaction:r}})}}async signTransaction(e){const t=ye(e),r=t?e.serializeMessage().toString("hex"):ee.from(e.message.serialize()).toString("hex"),n=await this.provider.request({method:"sign_transaction",params:{message:r,messageOnly:!0,isLegacyTransaction:t}}),i=JSON.parse(n),a={publicKey:new o.nh(i.publicKey),signature:ee.from(i.signature,"hex")};return e.addSignature(a.publicKey,a.signature),e}async signAllTransactions(e){let t;const r=e.map((e=>(t=ye(e),t?e.serializeMessage().toString("hex"):ee.from(e.message.serialize()).toString("hex")))),n=(await this.provider.request({method:"sign_all_transactions",params:{message:r,messageOnly:!0,isLegacyTransaction:t}})).map((e=>{const t=JSON.parse(e);return{publicKey:new o.nh(t.publicKey),signature:ee.from(t.signature,"hex")}}));return e.forEach(((e,t)=>(e.addSignature(n[t].publicKey,n[t].signature),e))),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${se.localStorageKeyPrefix}${window.location.hostname}`;let r="";if(Te&&e){const e=window.localStorage.getItem(t);if(e)r=e;else{const e=`torus-app-${de()}`;window.localStorage.setItem(t,e),r=e}}return this.dappStorageKey=r,r}async _setupWeb3(e){le.info("setupWeb3 running");const t=new m({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),r=new m({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new ve(t,{}),o=new _e(r,{});i.tryWindowHandle=(e,t)=>{const r=e;if(!Array.isArray(r)&&Ae.includes(r.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const e=de();o._handleWindow(e,{target:"_blank",features:ge(pe)}),r.windowId=e}i._rpcEngine.handle(r,t)},o.tryWindowHandle=(e,t)=>{const r=e;if(!Array.isArray(r)&&Ie.includes(r.method)){const e=de();o._handleWindow(e,{target:"_blank",features:ge(ue)}),r.params.windowId=e}o._rpcEngine.handle(r,t)};const a=e=>{const t=i[e],r=this;i[e]=function(e,n){const{method:i,params:o=[]}=e;if("solana_requestAccounts"===i){if(!n)return r.login({loginProvider:o[0]});r.login({loginProvider:o[0]}).then((e=>n(null,e))).catch((e=>n(e)))}return t.apply(this,[e,n])}};a("request"),a("sendAsync"),a("send");const s=new Proxy(i,{deleteProperty:()=>!0}),l=new Proxy(o,{deleteProperty:()=>!0});this.provider=s,this.communicationProvider=l,await Promise.all([i._initializeState(),o._initializeState((0,n.Z)((0,n.Z)({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),le.debug("Torus - injected provider")}}r(95898);function ke(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout((()=>{throw n}))}}class Ce extends s.EventEmitter{emit(e){let t="error"===e;const r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(t){let e;if(i.length>0&&([e]=i),e instanceof Error)throw e;const t=new Error("Unhandled error."+(e?` (${e.message})`:""));throw t.context=e,t}const a=r[e];if(void 0===a)return!1;if("function"===typeof a)ke(a,this,i);else{const e=a.length,t=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(a);for(let r=0;r<e;r+=1)ke(t[r],this,i)}return!0}}class Ne extends Error{constructor(e){let{code:t,message:r,data:n}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!r||"string"!==typeof r)throw new Error("message must be string");super(r),(0,i.Z)(this,"code",void 0),(0,i.Z)(this,"data",void 0),this.code=t,void 0!==n&&(this.data=n)}toString(){return d()({code:this.code,message:this.message,data:this.data,stack:this.stack})}}function xe(e){return async(t,r,n,i)=>{let o;const a=new Promise((e=>{o=e}));let s=null,l=!1;const d=async()=>{l=!0,n((e=>{s=e,o()})),await a};try{await e(t,r,d),l?(await a,s(null)):i(null)}catch(c){const e=c;s?s(e):i(e)}}}class Oe extends Ce{constructor(){super(),(0,i.Z)(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){const n=[];let i=null,o=!1;for(const a of r)if([i,o]=await Oe._runMiddleware(e,t,a,n),o)break;return[i,o,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((i=>{const o=e=>{const r=e||t.error;r&&(t.error=(0,c.Xy)(r)),i([r,!0])},a=e=>{t.error?o(t.error):(e&&("function"!==typeof e&&o(new Ne({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),n.push(e)),i([null,!1]))};try{r(e,t,a,o)}catch(s){o(s)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new Ne({code:-32603,message:"Response has no error or result for request"});if(!r)throw new Ne({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!==typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[i,o,a]=await Oe._runAllMiddleware(e,t,this._middleware);return o?(await Oe._runReturnHandlers(a),n(i)):r((async e=>{try{await Oe._runReturnHandlers(a)}catch(t){return e(t)}return e()}))}catch(i){return n(i)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!==typeof e){const e=new Ne({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!==typeof e.method){const r=new Ne({code:-32603,message:"method must be string"});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=(0,n.Z)({},e),i={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,i)}catch(a){o=a}return o&&(delete i.result,i.error||(i.error=(0,c.Xy)(o))),t(o,i)}async _processRequest(e,t){const[r,n,i]=await Oe._runAllMiddleware(e,t,this._middleware);if(Oe._checkForCompletion(e,t,n),await Oe._runReturnHandlers(i),r)throw r}}function Me(e){const t=new Oe;return e.forEach((e=>t.push(e))),t.asMiddleware()}function Le(e){const t=new Ce;return t.sendAsync=async t=>{const r=await e.handle(t);if(r.error){var n,i;const e=(0,c.Xy)(r.error,{fallbackError:{message:(null===(n=r.error)||void 0===n?void 0:n.message)||r.error.toString(),code:(null===(i=r.error)||void 0===i?void 0:i.code)||-32603}});throw c.PY.internal(e)}return r.result},t.send=(t,r)=>{if("function"!==typeof r)throw new Error('Must provide callback to "send" method.');e.handle(t,r)},e.on&&e.on("notification",(e=>{t.emit("data",null,e)})),t.request=async e=>{const r=(0,n.Z)((0,n.Z)({},e),{},{id:Math.random().toString(36).slice(2),jsonrpc:"2.0"});return await t.sendAsync(r)},t}Symbol("IGNORE_SUBSTREAM");r(1827);var je=r(79392);function De(e){let t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;const i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(i){const e=i;return e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&r&&0!==n}}class We{constructor(){(0,i.Z)(this,"store",{})}getItem(e){return this.store[e]||null}setItem(e,t){this.store[e]=t}}(0,i.Z)(class{constructor(e,t){(0,i.Z)(this,"storage",void 0),(0,i.Z)(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch(r){}}static getInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";if(!this.instance){let r;r="local"===t&&De("localStorage")?window.localStorage:"session"===t&&De("sessionStorage")?window.sessionStorage:new We,this.instance=new this(e,r)}return this.instance}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.setItem(this._storeKey,JSON.stringify({})),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(r))}},"instance",void 0);(0,n.Z)((0,n.Z)({},je.X_),je.Ad);var Ue=r(688);const $e=j().getLogger("http-helpers");$e.setLevel(L.levels.INFO);r(30456);const Fe="solana",qe="other",Be="solana";class He extends Ue.s{constructor(e,t){super(t),(0,i.Z)(this,"code",void 0),(0,i.Z)(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class Ze extends He{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Ze(e,`${Ze.messages[e]}, ${t}`)}static notFound(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5001,e)}static notInstalled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5002,e)}static notReady(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5003,e)}static windowBlocked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5004,e)}static windowClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5005,e)}static incompatibleChainNameSpace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5006,e)}static duplicateAdapterError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5007,e)}static invalidProviderConfigError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5008,e)}static providerNotReadyError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5009,e)}static rpcConnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5010,e)}static invalidParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5011,e)}static invalidNetwork(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ze.fromCode(5013,e)}}(0,i.Z)(Ze,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class Ke extends He{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Ke(e,`${Ke.messages[e]}. ${t}`)}static connectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ke.fromCode(5111,e)}static disconnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ke.fromCode(5112,e)}static notConnectedError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ke.fromCode(5113,e)}static popupClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ke.fromCode(5114,e)}static mfaEnabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ke.fromCode(5115,e)}static chainConfigNotAdded(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ke.fromCode(5116,e)}static unsupportedOperation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ke.fromCode(5117,e)}static coreKitKeyNotFound(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ke.fromCode(5118,e)}static userNotLoggedIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ke.fromCode(5119,e)}}(0,i.Z)(Ke,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useCoreKitKey flag is enabled but coreKitKey is not available",5119:"User not logged in."});class Ve extends He{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Ve(e,`${Ve.messages[e]}, ${t}`)}static chainIDNotAllowed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ve.fromCode(5201,e)}static operationNotAllowed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ve.fromCode(5202,e)}static chainNamespaceNotAllowed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ve.fromCode(5203,e)}}(0,i.Z)(Ve,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});class Ge extends He{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Ve(e,`${Ge.messages[e]}, ${t}`)}static invalidRequestArgs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ve.fromCode(5301,e)}static invalidRequestMethod(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ve.fromCode(5302,e)}static invalidRequestParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ve.fromCode(5303,e)}}(0,i.Z)(Ge,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});const ze={OPENLOGIN:"openlogin",WALLET_CONNECT_V2:"wallet-connect-v2"},Ye=(0,n.Z)({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLFLARE:"solflare",SLOPE:"slope"},ze),Je=(0,n.Z)({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},ze),Xe=(0,n.Z)((0,n.Z)({},Je),Ye),Qe=(Ye.TORUS_SOLANA,Ye.PHANTOM,Ye.SOLFLARE,Ye.SLOPE,Je.TORUS_EVM,Je.METAMASK,Je.COINBASE,"external"),et={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},tt=(0,n.Z)((0,n.Z)({},et),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated",CACHE_CLEAR:"cache_clear"});var rt=j().getLogger("web3auth-logger");const nt=e=>("string"===typeof e||"number"===typeof e)&&/^(-)?0x[0-9a-f]*$/i.test(e);var it=r(29513);function ot(e){let t=e;if("string"!==typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const at=e=>{if("string"!==typeof e)throw new Error(`hex argument type ${typeof e} must be of type string`);if(!e.startsWith("0x"))throw new Error(`prefixed hex input should start with 0x, got ${e.substring(0,2)}`);(e=e.slice(2)).length%2!==0&&(e=ot(e));const t=e.length/2,r=new Uint8Array(t);for(let n=0;n<t;n++){const t=parseInt(e.slice(2*n,2*(n+1)),16);r[n]=t}return r};BigInt("0xffffffffffffffff"),BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),k.k.CURVE.n,k.k.CURVE.n,BigInt(2),BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),at("0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"),at("0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"),at("0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421"),Uint8Array.from([128]),BigInt(1e9);Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));BigInt(0);new Uint8Array(0);var st,lt,dt;!function(e){e.String="string",e.Bytes="view",e.Number="number"}(st||(st={})),function(e){e.String="string",e.Bytes="view",e.JSON="json"}(lt||(lt={})),function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(dt||(dt={}));r(25102);r(19778).Buffer;class ct extends Ce{constructor(e){let{config:t={},state:r={}}=e;super(),(0,i.Z)(this,"defaultConfig",{}),(0,i.Z)(this,"defaultState",{}),(0,i.Z)(this,"disabled",!1),(0,i.Z)(this,"name","BaseController"),(0,i.Z)(this,"initialConfig",void 0),(0,i.Z)(this,"initialState",void 0),(0,i.Z)(this,"internalConfig",this.defaultConfig),(0,i.Z)(this,"internalState",this.defaultState),this.initialState=r,this.initialConfig=t}get config(){return this.internalConfig}get state(){return this.internalState}configure(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)"undefined"!==typeof this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const r in e)"undefined"!==typeof this.internalConfig[r]&&(this.internalConfig[r]=e[r],this[r]=e[r])}update(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.internalState=t?(0,n.Z)({},e):(0,n.Z)((0,n.Z)({},this.internalState),e),this.emit("store",this.internalState)}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}}const ut=()=>!0,ht=["newListener","removeListener"],ft=e=>!ht.includes(e);function pt(e,t){let r=(t||{}).eventFilter||ut;if("string"===typeof r&&"skipInternal"===r&&(r=ft),"function"!==typeof r)throw new Error("createEventEmitterProxy - Invalid eventFilter");let n=e,i=e=>{const t=n;n=e,t.eventNames().filter(r).forEach((r=>{(function(e,t){return"undefined"!==typeof e.rawListeners?e.rawListeners(t):e.listeners(t)})(t,r).forEach((t=>e.on(r,t)))})),t.removeAllListeners()};return new Proxy({},{get:(e,t)=>"setTarget"===t?i:n[t],set:(e,t,r)=>"setTarget"===t?(i=r,!0):(n[t]=r,!0)})}class gt extends Error{}const bt=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function wt(e){switch(e.status){case 405:throw c.PY.methodNotFound();case 418:throw c.PY.internal({message:"Request is being rate limited."});case 503:case 504:throw c.PY.internal({message:"Gateway timeout. The request took too long to process.This can happen when querying over too wide a block range."})}}function yt(e){return new Promise((t=>{setTimeout(t,e)}))}function mt(e,t){if(200!==e.status)throw c.PY.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw c.PY.internal({data:t.error});return t.result}function _t(e){let{rpcTarget:t,originHttpHeaderKey:r}=e;return xe((async(e,n,i)=>{const{fetchUrl:o,fetchParams:a}=function(e){let{req:t,rpcTarget:r,originHttpHeaderKey:n}=e;const i=new URL(r),o={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},a=t.origin,s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)};return n&&a&&(s.headers[n]=a),{fetchUrl:i.href,fetchParams:s}}({req:e,rpcTarget:t,originHttpHeaderKey:r});for(let t=0;t<5;t++){try{const e=await fetch(o,a);wt(e);const t=await e.json(),r=mt(e,t);return void(n.result=r)}catch(s){const e=s.toString();if(!bt.some((t=>e.includes(t))))throw s}await yt(1e3)}}))}var vt,St,Et=r(51887),Rt=r.n(Et);class At extends ct{constructor(e){let{config:t,state:r}=e;if(super({config:t,state:r}),(0,i.Z)(this,"_providerEngineProxy",null),!t.chainConfig)throw Ze.invalidProviderConfigError("Please provide chainConfig");if(!t.chainConfig.chainId)throw Ze.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!t.chainConfig.rpcTarget)throw Ze.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");this.defaultState={chainId:"loading"},this.defaultConfig={chainConfig:t.chainConfig,networks:{[t.chainConfig.chainId]:t.chainConfig}},super.initialize()}get currentChainConfig(){return this.config.chainConfig}get provider(){return this._providerEngineProxy}get chainId(){return this.state.chainId}set provider(e){throw new Error("Method not implemented.")}async request(e){var t;if(!e||"object"!==typeof e||Array.isArray(e))throw c.PY.invalidRequest({message:Ge.invalidRequestArgs().message,data:(0,n.Z)((0,n.Z)({},e||{}),{},{cause:Ge.invalidRequestArgs().message})});const{method:r,params:i}=e;if("string"!==typeof r||0===r.length)throw c.PY.invalidRequest({message:Ge.invalidRequestMethod().message,data:(0,n.Z)((0,n.Z)({},e||{}),{},{cause:Ge.invalidRequestMethod().message})});if(void 0!==i&&!Array.isArray(i)&&("object"!==typeof i||null===i))throw c.PY.invalidRequest({message:Ge.invalidRequestParams().message,data:(0,n.Z)((0,n.Z)({},e||{}),{},{cause:Ge.invalidRequestParams().message})});return null===(t=this.provider)||void 0===t?void 0:t.request(e)}sendAsync(e,t){return t?this.send(e,t):this.request(e)}send(e,t){this.request(e).then((e=>t(null,{result:e}))).catch((e=>t(e,null)))}addChain(e){if(!e.chainId)throw c.PY.invalidParams("chainId is required");if(!e.rpcTarget)throw c.PY.invalidParams("chainId is required");this.configure({networks:(0,n.Z)((0,n.Z)({},this.config.networks),{},{[e.chainId]:e})})}getChainConfig(e){var t;const r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw c.PY.invalidRequest(`Chain ${e} is not supported, please add chainConfig for it`);return r}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=pt(e)}getProviderEngineProxy(){return this._providerEngineProxy}}function It(e){return(t,r,n,i)=>"chainId"===t.method?(r.result=e,i()):n()}function Tt(e){return(t,r,n,i)=>"provider_config"===t.method?(r.result=e,i()):n()}class Pt extends At{constructor(e){let{config:t,state:r}=e;super({config:t,state:r})}async setupProvider(){const{networkMiddleware:e}=function(e){const{chainId:t,rpcTarget:r}=e,n=_t({rpcTarget:r});return{networkMiddleware:Me([It(t),Tt(e),n]),fetchMiddleware:n}}(this.config.chainConfig),t=new Oe;t.push(e);const r=Le(t);this.updateProviderEngineProxy(r);const n=this.config.chainConfig.chainId;this.state.chainId!==n&&(this.emit("chainChanged",n),this.emit("connect",{chainId:n})),this.update({chainId:this.config.chainConfig.chainId})}async switchChain(e){if(!this._providerEngineProxy)throw c.gK.custom({message:"Provider is not initialized",code:4902});const t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t}),await this.setupProvider()}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=pt(e)}getProviderEngineProxy(){return this._providerEngineProxy}lookupNetwork(){throw new Error("Method not implemented.")}}vt=Pt,(0,i.Z)(Pt,"getProviderInstance",(async e=>{const t=new vt({config:{chainConfig:e.chainConfig}});return await t.setupProvider(),t}));class kt extends At{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:(0,n.Z)((0,n.Z)({},t.chainConfig),{},{chainNamespace:qe})},state:r}),(0,i.Z)(this,"_providerEngineProxy",null)}get provider(){return this._providerEngineProxy}set provider(e){throw new Error("Method not implemented.")}addChain(e){throw new Error("Method not implemented.")}async setupProvider(e){const t=this.getPrivKeyMiddleware(e),r=new Oe;r.push(t);const n=Le(r);this.updateProviderEngineProxy(n)}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=pt(e)}async switchChain(e){return Promise.resolve()}getProviderEngineProxy(){return this._providerEngineProxy}async lookupNetwork(){return Promise.resolve("")}getPrivKeyMiddleware(e){const t={getPrivatekey:async()=>e};return this.createPrivKeyMiddleware(t)}createPrivKeyMiddleware(e){let{getPrivatekey:t}=e;return r={private_key:xe((async function(e,r){r.result=await t()}))},(e,t,n,i)=>{const o=r[e.method];return void 0===o?n():"function"===typeof o?o(e,t,n,i):(t.result=o,i())};var r}}St=kt,(0,i.Z)(kt,"getProviderInstance",(async e=>{const t=new St({config:{chainConfig:e.chainConfig}});return await t.setupProvider(e.privKey),t}));Rt()();var Ct=r(45706),Nt=r.n(Ct),xt=r(83201),Ot=r.n(xt),Mt=r(19778).Buffer;const Lt=Ot().lowlevel;var jt=r(19778).Buffer;function Dt(e){return(t,r,n,i)=>"solana_chainId"===t.method?(r.result=e,i()):n()}function Wt(e){return(t,r,n,i)=>"solana_provider_config"===t.method?(r.result=e,i()):n()}function Ut(e){const{chainId:t}=e;return Me([Dt(t),Wt(e)])}function $t(e){let{getAccounts:t}=e;return xe((async(e,r,n)=>{const{method:i}=e;if("getAccounts"!==i)return n();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");const o=await t(e);r.result=o}))}function Ft(e){let{requestAccounts:t}=e;return xe((async(e,r,n)=>{const{method:i}=e;if("requestAccounts"!==i)return n();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const o=await t(e);r.result=o}))}function qt(e,t){return xe((async(r,n,i)=>{const{method:o}=r;if(o!==e)return i();if(!t)throw new Error(`WalletMiddleware - ${e} not provided`);const a=await t(r);n.result=a}))}function Bt(e){const{getAccounts:t,requestAccounts:r,signTransaction:n,signAndSendTransaction:i,signAllTransactions:o,signMessage:a,getPrivateKey:s,getSecretKey:l}=e;return Me([Ft({requestAccounts:r}),$t({getAccounts:t}),qt("signTransaction",n),qt("signAndSendTransaction",i),qt("signAllTransactions",o),qt("signMessage",a),qt("solanaPrivateKey",s),qt("private_key",s),qt("solanaSecretKey",l)])}function Ht(e){return xe((async(t,r,n)=>{const i=await e.request(t);r.result=i}))}class Zt extends At{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:(0,n.Z)((0,n.Z)({},t.chainConfig),{},{chainNamespace:Fe})},state:r})}async switchChain(e){await this.provider.request({method:"switchSolanaChain",params:[{chainId:e.chainId}]})}async addChain(e){super.addChain(e),await this.provider.request({method:"addNewChainConfig",params:[{chainId:e.chainId,chainName:e.displayName,rpcUrls:[e.rpcTarget],blockExplorerUrls:[e.blockExplorer],nativeCurrency:{name:e.tickerName,symbol:e.ticker,decimals:e.decimals||18}}]})}async setupProvider(e){this.handleInjectedProviderUpdate(e),await this.setupEngine(e)}async lookupNetwork(){if(!this.provider)throw c.gK.custom({message:"Torus solana provider is not initialized",code:4902});const{chainId:e}=this.config.chainConfig,t=await this.provider.request({method:"solana_chainId"}),r=nt(t.toString())?t:`0x${parseInt(t,10).toString(16)}`;if(e!==r)throw Ze.rpcConnectionError(`Invalid network, net_version is: ${r}, expected: ${e}`);return this.update({chainId:r}),this.emit("connect",{chainId:this.state.chainId}),this.emit("chainChanged",this.state.chainId),this.state.chainId}async setupEngine(e){const t=(e=>({requestAccounts:async()=>await e.request({method:"solana_requestAccounts",params:{}}),getAccounts:async()=>await e.request({method:"solana_requestAccounts",params:{}}),getPrivateKey:async()=>{throw c.PY.methodNotSupported()},getSecretKey:async()=>{throw c.PY.methodNotSupported()},signMessage:async t=>{var r;if(null===(r=t.params)||void 0===r||!r.message)throw c.PY.invalidParams("message");return await e.signMessage(t.params.message)},signTransaction:async t=>{var r;if(null===(r=t.params)||void 0===r||!r.message)throw c.PY.invalidParams("message");const n=t.params.message;return await e.signTransaction(n)},signAndSendTransaction:async t=>{var r;if(null===(r=t.params)||void 0===r||!r.message)throw c.PY.invalidParams("message");const n=t.params.message;return{signature:await e.sendTransaction(n)}},signAllTransactions:async t=>{var r,n;if(null===(r=t.params)||void 0===r||!r.message||null===(n=t.params)||void 0===n||!n.message.length)throw c.PY.invalidParams("message");const i=t.params.message;return await e.signAllTransactions(i)}}))(e),r=Bt(t),n=Ht(e),i=new Oe;i.push(r),i.push(n);const o=Le(i);this.updateProviderEngineProxy(o),await this.lookupNetwork()}async handleInjectedProviderUpdate(e){e.on("accountsChanged",(async e=>{this.emit("accountsChanged",e)})),e.on("chainChanged",(async t=>{const r=nt(t)?t:`0x${parseInt(t,10).toString(16)}`;this.configure({chainConfig:(0,n.Z)((0,n.Z)({},this.config.chainConfig),{},{chainId:r})}),await this.setupProvider(e)}))}}var Kt;class Vt extends At{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:(0,n.Z)((0,n.Z)({},t.chainConfig),{},{chainNamespace:Fe})},state:r})}async enable(){if(!this.state.privateKey)throw c.gK.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}getEd25519Key(e){return function(e){let t;t="string"===typeof e?Mt.from(e,"hex"):e;const r=new Uint8Array(64),n=[Lt.gf(),Lt.gf(),Lt.gf(),Lt.gf()],i=new Uint8Array([...new Uint8Array(t),...new Uint8Array(32)]),o=new Uint8Array(32);Lt.crypto_hash(r,i,32),r[0]&=248,r[31]&=127,r[31]|=64,Lt.scalarbase(n,r),Lt.pack(o,n);for(let a=0;a<32;a+=1)i[a+32]=o[a];return{sk:Mt.from(i),pk:Mt.from(o)}}(e).sk.toString("hex").padStart(128,"0")}async setupProvider(e){const t=await async function(e){let{privKey:t,getProviderEngineProxy:r}=e;if("string"!==typeof t)throw Ze.invalidParams("privKey must be a string");const n=o.RG.fromSecretKey(jt.from(t,"hex"));return{requestAccounts:async()=>[n.publicKey.toBase58()],getAccounts:async()=>[n.publicKey.toBase58()],getPrivateKey:async()=>t,getSecretKey:async()=>Nt().encode(n.secretKey),signTransaction:async e=>{var t;if(null===(t=e.params)||void 0===t||!t.message)throw c.PY.invalidParams("message");const r=e.params.message;return void 0!==r.version||r instanceof o.GS?r.sign([n]):r.partialSign(n),r},signMessage:async e=>{var t;if(null===(t=e.params)||void 0===t||!t.message)throw c.PY.invalidParams("message");return Ot().sign.detached(e.params.message,n.secretKey)},signAndSendTransaction:async e=>{var t;if(null===(t=e.params)||void 0===t||!t.message)throw c.PY.invalidParams("message");const i=r();if(!i)throw c.gK.custom({message:"Provider is not initialized",code:4902});const a=e.params.message;return void 0!==a.version||a instanceof o.GS?a.sign([n]):a.partialSign(n),{signature:await i.request({method:"sendTransaction",params:[jt.from(a.serialize()).toString("base64"),{encoding:"base64",preflightCommitment:"confirmed"}]})}},signAllTransactions:async e=>{var t,r,i;if(null===(t=e.params)||void 0===t||!t.message||null===(r=e.params)||void 0===r||!r.message.length)throw c.PY.invalidParams("message");const a=null===(i=e.params)||void 0===i?void 0:i.message;for(const s of a||[]){const e=s;void 0!==e.version||e instanceof o.GS?e.sign([n]):e.partialSign(n)}return a}}}({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),r=Bt(t),n=new Oe,{networkMiddleware:i}=function(e){const{rpcTarget:t}=e,r=_t({rpcTarget:t});return{networkMiddleware:Me([Ut(e),r]),fetchMiddleware:r}}(this.config.chainConfig);n.push(this.getChainSwitchMiddleware()),n.push(this.getAccountMiddleware()),n.push(r),n.push(i);const a=Le(n);this.updateProviderEngineProxy(a),await this.lookupNetwork()}async updateAccount(e){if(!this._providerEngineProxy)throw c.gK.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==e.privateKey&&(await this.setupProvider(e.privateKey),this.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(e){if(!this._providerEngineProxy)throw c.gK.custom({message:"Provider is not initialized",code:4902});const t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t});const r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw c.gK.custom({message:"Provider is not initialized",code:4902});const e=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:t}=this.config;if("ok"!==e)throw Ze.rpcConnectionError(`Failed to lookup network for following rpc target: ${t.rpcTarget}`);return this.update({chainId:t.chainId}),this.state.chainId!==t.chainId&&(this.emit("chainChanged",this.state.chainId),this.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return function(e){let{addNewChainConfig:t,switchSolanaChain:r}=e;return Me([qt("addSolanaChain",t),qt("switchSolanaChain",r)])}({addNewChainConfig:async e=>{if(!e.params)throw c.PY.invalidParams("Missing request params");const{chainId:t,chainName:r,rpcUrls:n,blockExplorerUrls:i,nativeCurrency:o}=e.params;if(!t)throw c.PY.invalidParams("Missing chainId in chainParams");if(!n||0===n.length)throw c.PY.invalidParams("Missing rpcUrls in chainParams");if(!o)throw c.PY.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:Fe,chainId:t,ticker:(null===o||void 0===o?void 0:o.symbol)||"SOL",tickerName:(null===o||void 0===o?void 0:o.name)||"Solana",displayName:r,rpcTarget:n[0],blockExplorer:(null===i||void 0===i?void 0:i[0])||"",decimals:(null===o||void 0===o?void 0:o.decimals)||9})},switchSolanaChain:async e=>{if(!e.params)throw c.PY.invalidParams("Missing request params");if(!e.params.chainId)throw c.PY.invalidParams("Missing chainId");await this.switchChain(e.params)}})}getAccountMiddleware(){return function(e){let{updatePrivatekey:t}=e;return Me([qt("updateAccount",t)])}({updatePrivatekey:async e=>{if(!e.params)throw c.PY.invalidParams("Missing request params");if(!e.params.privateKey)throw c.PY.invalidParams("Missing privateKey");const{privateKey:t}=e.params;await this.updateAccount({privateKey:t})}})}}Kt=Vt,(0,i.Z)(Vt,"getProviderInstance",(async e=>{const t=new Kt({config:{chainConfig:e.chainConfig}});return await t.setupProvider(e.privKey),t}));class Gt extends it.v{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),(0,i.Z)(this,"name",Xe.TORUS_SOLANA),(0,i.Z)(this,"adapterNamespace",Be),(0,i.Z)(this,"currentChainNamespace",Fe),(0,i.Z)(this,"type",Qe),(0,i.Z)(this,"status",et.NOT_READY),(0,i.Z)(this,"torusInstance",null),(0,i.Z)(this,"torusWalletOptions",void 0),(0,i.Z)(this,"initParams",void 0),(0,i.Z)(this,"loginSettings",{}),(0,i.Z)(this,"solanaProvider",null),this.torusWalletOptions=e.adapterSettings||{},this.initParams=e.initParams||{},this.loginSettings=e.loginSettings||{}}get provider(){return this.status!==et.NOT_READY&&this.solanaProvider?this.solanaProvider:null}set provider(e){throw new Error("Not implemented")}async init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await super.init(e),super.checkInitializationRequirements();const{chainId:t,blockExplorer:r,displayName:i,rpcTarget:o,ticker:a,tickerName:s}=this.chainConfig,l={chainId:t,rpcTarget:o,blockExplorerUrl:r,displayName:i,tickerName:s,ticker:a,logo:""};this.torusInstance=new Pe(this.torusWalletOptions),rt.debug("initializing torus solana adapter init"),await this.torusInstance.init((0,n.Z)((0,n.Z)({showTorusButton:!1},this.initParams),{},{network:l})),this.solanaProvider=new Zt({config:{chainConfig:this.chainConfig}}),this.status=et.READY,this.emit(tt.READY,Xe.TORUS_SOLANA);try{rt.debug("initializing torus solana adapter"),e.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(d){rt.error("Failed to connect with cached torus solana provider",d),this.emit(tt.ERRORED,d)}}async connect(){if(super.checkConnectionRequirements(),!this.torusInstance)throw Ze.notReady("Torus wallet is not initialized");if(!this.solanaProvider)throw Ze.notReady("Torus wallet is not initialized");this.status=et.CONNECTING,this.emit(tt.CONNECTING,{adapter:Xe.TORUS_SOLANA});try{await this.torusInstance.login(this.loginSettings);try{const e=this.torusInstance.provider;e.sendTransaction=this.torusInstance.sendTransaction.bind(this.torusInstance),e.signAllTransactions=this.torusInstance.signAllTransactions.bind(this.torusInstance),e.signMessage=this.torusInstance.signMessage.bind(this.torusInstance),e.signTransaction=this.torusInstance.signTransaction.bind(this.torusInstance),await this.solanaProvider.setupProvider(e)}catch(e){if(!(e instanceof He&&5010===e.code))throw e;{const{chainId:e,blockExplorer:t,displayName:r,rpcTarget:n,ticker:i,tickerName:o}=this.chainConfig,a={chainId:e,rpcTarget:n,blockExplorerUrl:t,displayName:r,tickerName:o,ticker:i,logo:""};await this.torusInstance.setProvider(a)}}return this.status=et.CONNECTED,this.torusInstance.showTorusButton(),this.emit(et.CONNECTED,{adapter:Xe.TORUS_SOLANA,reconnected:this.rehydrated}),this.provider}catch(e){if(this.status=et.READY,this.rehydrated=!1,this.emit(tt.ERRORED,e),e instanceof He)throw e;throw Ke.connectionError("Failed to login with torus solana wallet")}}async disconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(await super.disconnectSession(),!this.torusInstance)throw Ze.notReady("Torus wallet is not initialized");await this.torusInstance.logout(),e.cleanup?(this.status=et.NOT_READY,this.torusInstance=null,this.solanaProvider=null):this.status=et.READY,await super.disconnect()}async getUserInfo(){if(this.status!==et.CONNECTED)throw Ke.notConnectedError("Not connected with wallet");if(!this.torusInstance)throw Ze.notReady("Torus wallet is not initialized");return await this.torusInstance.getUserInfo()}async addChain(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.checkAddChainRequirements(e,t),this.addChainConfig(e)}async switchChain(e){var t;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.checkSwitchChainRequirements(e,r);const n=this.getChainConfig(e.chainId);await(null===(t=this.torusInstance)||void 0===t?void 0:t.setProvider({rpcTarget:n.rpcTarget,chainId:n.chainId,displayName:n.displayName,blockExplorerUrl:n.blockExplorer,ticker:n.ticker,tickerName:n.tickerName,logo:"https://images.web3auth.io/login-torus-solana.svg"})),this.setAdapterSettings({chainConfig:this.getChainConfig(e.chainId)})}}},39480:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=n}var a=e.length,s=e.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function c(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===s;)n++,r++;for(var o=(e.length-r)*l+1>>>0,d=new Uint8Array(o);e[r];){var c=t[e.charCodeAt(r)];if(255===c)return;for(var u=0,h=o-1;(0!==c||u<i)&&-1!==h;h--,u++)c+=a*d[h]>>>0,d[h]=c%256>>>0,c=c/256>>>0;if(0!==c)throw new Error("Non-zero carry");i=u,r++}for(var f=o-i;f!==o&&0===d[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=d[f++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var l=(o-i)*d+1>>>0,c=new Uint8Array(l);i!==o;){for(var u=t[i],h=0,f=l-1;(0!==u||h<n)&&-1!==f;f--,h++)u+=256*c[f]>>>0,c[f]=u%a>>>0,u=u/a>>>0;if(0!==u)throw new Error("Non-zero carry");n=h,i++}for(var p=l-n;p!==l&&0===c[p];)p++;for(var g=s.repeat(r);p<l;++p)g+=e.charAt(c[p]);return g},decodeUnsafe:c,decode:function(e){var t=c(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},45706:(e,t,r)=>{const n=r(39480);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},81206:(e,t,r)=>{"use strict";const{AbortError:n,codes:i}=r(82860),{isNodeStream:o,isWebStream:a,kControllerErrorFunction:s}=r(84289),l=r(19406),{ERR_INVALID_ARG_TYPE:d}=i;e.exports.addAbortSignal=function(t,r){if(((e,t)=>{if("object"!==typeof e||!("aborted"in e))throw new d(t,"AbortSignal",e)})(t,"signal"),!o(r)&&!a(r))throw new d("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!==typeof e||!("aborted"in e))return t;const r=o(t)?()=>{t.destroy(new n(void 0,{cause:e.reason}))}:()=>{t[s](new n(void 0,{cause:e.reason}))};return e.aborted?r():(e.addEventListener("abort",r),l(t,(()=>e.removeEventListener("abort",r)))),t}},74789:(e,t,r)=>{"use strict";const{StringPrototypeSlice:n,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:a}=r(96918),{Buffer:s}=r(19778),{inspect:l}=r(40670);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let r=this.head,n=0;for(;r;)o(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,i=0;do{const o=r.data;if(!(e>o.length)){e===o.length?(t+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(o,0,e),this.head=r,r.data=n(o,e));break}t+=o,e-=o.length,++i}while(null!==(r=r.next));return this.length-=i,t}_getBuffer(e){const t=s.allocUnsafe(e),r=e;let n=this.head,i=0;do{const s=n.data;if(!(e>s.length)){e===s.length?(o(t,s,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(o(t,new a(s.buffer,s.byteOffset,e),r-e),this.head=n,n.data=s.slice(e));break}o(t,s,r-e),e-=s.length,++i}while(null!==(n=n.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},60089:(e,t,r)=>{"use strict";const{pipeline:n}=r(86622),i=r(38120),{destroyer:o}=r(2832),{isNodeStream:a,isReadable:s,isWritable:l,isWebStream:d,isTransformStream:c,isWritableStream:u,isReadableStream:h}=r(84289),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=r(82860),b=r(19406);e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new g("streams");if(1===t.length)return i.from(t[0]);const w=[...t];if("function"===typeof t[0]&&(t[0]=i.from(t[0])),"function"===typeof t[t.length-1]){const e=t.length-1;t[e]=i.from(t[e])}for(let n=0;n<t.length;++n)if(a(t[n])||d(t[n])){if(n<t.length-1&&!(s(t[n])||h(t[n])||c(t[n])))throw new p(`streams[${n}]`,w[n],"must be readable");if(n>0&&!(l(t[n])||u(t[n])||c(t[n])))throw new p(`streams[${n}]`,w[n],"must be writable")}let y,m,_,v,S;const E=t[0],R=n(t,(function(e){const t=v;v=null,t?t(e):e?S.destroy(e):I||A||S.destroy()})),A=!!(l(E)||u(E)||c(E)),I=!!(s(R)||h(R)||c(R));if(S=new i({writableObjectMode:!(null===E||void 0===E||!E.writableObjectMode),readableObjectMode:!(null===R||void 0===R||!R.writableObjectMode),writable:A,readable:I}),A){if(a(E))S._write=function(e,t,r){E.write(e,t)?r():y=r},S._final=function(e){E.end(),m=e},E.on("drain",(function(){if(y){const e=y;y=null,e()}}));else if(d(E)){const e=(c(E)?E.writable:E).getWriter();S._write=async function(t,r,n){try{await e.ready,e.write(t).catch((()=>{})),n()}catch(i){n(i)}},S._final=async function(t){try{await e.ready,e.close().catch((()=>{})),m=t}catch(r){t(r)}}}const e=c(R)?R.readable:R;b(e,(()=>{if(m){const e=m;m=null,e()}}))}if(I)if(a(R))R.on("readable",(function(){if(_){const e=_;_=null,e()}})),R.on("end",(function(){S.push(null)})),S._read=function(){for(;;){const e=R.read();if(null===e)return void(_=S._read);if(!S.push(e))return}};else if(d(R)){const e=(c(R)?R.readable:R).getReader();S._read=async function(){for(;;)try{const{value:t,done:r}=await e.read();if(!S.push(t))return;if(r)return void S.push(null)}catch{return}}}return S._destroy=function(e,t){e||null===v||(e=new f),_=null,y=null,m=null,null===v?t(e):(v=t,a(R)&&o(R,e))},S}},2832:(e,t,r)=>{"use strict";const n=r(1426),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:a}=r(82860),{Symbol:s}=r(96918),{kDestroyed:l,isDestroyed:d,isFinished:c,isServerRequest:u}=r(84289),h=s("kDestroy"),f=s("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function g(e,t,r){let i=!1;function o(t){if(i)return;i=!0;const o=e._readableState,a=e._writableState;p(t,a,o),a&&(a.closed=!0),o&&(o.closed=!0),"function"===typeof r&&r(t),t?n.nextTick(b,e,t):n.nextTick(w,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function b(e,t){y(e,t),w(e)}function w(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!==r&&void 0!==r&&r.emitClose||null!==t&&void 0!==t&&t.emitClose)&&e.emit("close")}function y(e,t){const r=e._readableState,n=e._writableState;null!==n&&void 0!==n&&n.errorEmitted||null!==r&&void 0!==r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function m(e,t,r){const i=e._readableState,o=e._writableState;if(null!==o&&void 0!==o&&o.destroyed||null!==i&&void 0!==i&&i.destroyed)return this;null!==i&&void 0!==i&&i.autoDestroy||null!==o&&void 0!==o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(y,e,t):y(e,t))}function _(e){let t=!1;function r(r){if(t)return void m(e,null!==r&&void 0!==r?r:new o);t=!0;const i=e._readableState,a=e._writableState,s=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(h,r):r?m(e,r,!0):n.nextTick(v,e)}try{e._construct((e=>{n.nextTick(r,e)}))}catch(i){n.nextTick(r,i)}}function v(e){e.emit(f)}function S(e){return(null===e||void 0===e?void 0:e.setHeader)&&"function"===typeof e.abort}function E(e){e.emit("close")}function R(e,t){e.emit("error",t),n.nextTick(E,e)}e.exports={construct:function(e,t){if("function"!==typeof e._construct)return;const r=e._readableState,i=e._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(f,t),e.listenerCount(f)>1||n.nextTick(_,e)},destroyer:function(e,t){e&&!d(e)&&(t||c(e)||(t=new a),u(e)?(e.socket=null,e.destroy(t)):S(e)?e.abort():S(e.req)?e.req.abort():"function"===typeof e.destroy?e.destroy(t):"function"===typeof e.close?e.close():t?n.nextTick(R,e,t):n.nextTick(E,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){const r=this._readableState,n=this._writableState,o=n||r;return null!==n&&void 0!==n&&n.destroyed||null!==r&&void 0!==r&&r.destroyed?("function"===typeof t&&t(),this):(p(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?g(this,e,t):this.once(h,(function(r){g(this,i(r,e),t)})),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:m}},38120:(e,t,r)=>{"use strict";const{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:o,ObjectSetPrototypeOf:a}=r(96918);e.exports=d;const s=r(5146),l=r(63654);a(d.prototype,s.prototype),a(d,s);{const e=o(l.prototype);for(let t=0;t<e.length;t++){const r=e[t];d.prototype[r]||(d.prototype[r]=l.prototype[r])}}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),l.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let c,u;function h(){return void 0===c&&(c={}),c}n(d.prototype,{writable:{__proto__:null,...i(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(l.prototype,"writableLength")},writableFinished:{__proto__:null,...i(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),d.fromWeb=function(e,t){return h().newStreamDuplexFromReadableWritablePair(e,t)},d.toWeb=function(e){return h().newReadableWritablePairFromDuplex(e)},d.from=function(e){return u||(u=r(77416)),u(e,"body")}},77416:(e,t,r)=>{const n=r(1426),i=r(19778),{isReadable:o,isWritable:a,isIterable:s,isNodeStream:l,isReadableNodeStream:d,isWritableNodeStream:c,isDuplexNodeStream:u}=r(84289),h=r(19406),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g}}=r(82860),{destroyer:b}=r(2832),w=r(38120),y=r(5146),{createDeferredPromise:m}=r(40670),_=r(36691),v=globalThis.Blob||i.Blob,S="undefined"!==typeof v?function(e){return e instanceof v}:function(e){return!1},E=globalThis.AbortController||r(35935).AbortController,{FunctionPrototypeCall:R}=r(96918);class A extends w{constructor(e){super(e),!1===(null===e||void 0===e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null===e||void 0===e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function I(e){const t=e.readable&&"function"!==typeof e.readable.read?y.wrap(e.readable):e.readable,r=e.writable;let n,i,s,l,d,c=!!o(t),u=!!a(r);function p(e){const t=l;l=null,t?t(e):e&&d.destroy(e)}return d=new A({readableObjectMode:!(null===t||void 0===t||!t.readableObjectMode),writableObjectMode:!(null===r||void 0===r||!r.writableObjectMode),readable:c,writable:u}),u&&(h(r,(e=>{u=!1,e&&b(t,e),p(e)})),d._write=function(e,t,i){r.write(e,t)?i():n=i},d._final=function(e){r.end(),i=e},r.on("drain",(function(){if(n){const e=n;n=null,e()}})),r.on("finish",(function(){if(i){const e=i;i=null,e()}}))),c&&(h(t,(e=>{c=!1,e&&b(t,e),p(e)})),t.on("readable",(function(){if(s){const e=s;s=null,e()}})),t.on("end",(function(){d.push(null)})),d._read=function(){for(;;){const e=t.read();if(null===e)return void(s=d._read);if(!d.push(e))return}}),d._destroy=function(e,o){e||null===l||(e=new f),s=null,n=null,i=null,null===l?o(e):(l=o,b(r,e),b(t,e))},d}e.exports=function e(t,r){if(u(t))return t;if(d(t))return I({readable:t});if(c(t))return I({writable:t});if(l(t))return I({writable:!1,readable:!1});if("function"===typeof t){const{value:e,write:i,final:o,destroy:a}=function(e){let{promise:t,resolve:r}=m();const i=new E,o=i.signal,a=e(async function*(){for(;;){const e=t;t=null;const{chunk:i,done:a,cb:s}=await e;if(n.nextTick(s),a)return;if(o.aborted)throw new f(void 0,{cause:o.reason});({promise:t,resolve:r}=m()),yield i}}(),{signal:o});return{value:a,write(e,t,n){const i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){const t=r;r=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(s(e))return _(A,e,{objectMode:!0,write:i,final:o,destroy:a});const l=null===e||void 0===e?void 0:e.then;if("function"===typeof l){let t;const r=R(l,e,(e=>{if(null!=e)throw new g("nully","body",e)}),(e=>{b(t,e)}));return t=new A({objectMode:!0,readable:!1,write:i,final(e){o((async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}}))},destroy:a})}throw new g("Iterable, AsyncIterable or AsyncFunction",r,e)}if(S(t))return e(t.arrayBuffer());if(s(t))return _(A,t,{objectMode:!0,writable:!1});if("object"===typeof(null===t||void 0===t?void 0:t.writable)||"object"===typeof(null===t||void 0===t?void 0:t.readable)){return I({readable:null!==t&&void 0!==t&&t.readable?d(null===t||void 0===t?void 0:t.readable)?null===t||void 0===t?void 0:t.readable:e(t.readable):void 0,writable:null!==t&&void 0!==t&&t.writable?c(null===t||void 0===t?void 0:t.writable)?null===t||void 0===t?void 0:t.writable:e(t.writable):void 0})}const i=null===t||void 0===t?void 0:t.then;if("function"===typeof i){let e;return R(i,t,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{b(e,t)})),e=new A({objectMode:!0,writable:!1,read(){}})}throw new p(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},19406:(e,t,r)=>{const n=r(1426),{AbortError:i,codes:o}=r(82860),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=o,{kEmptyObject:l,once:d}=r(40670),{validateAbortSignal:c,validateFunction:u,validateObject:h,validateBoolean:f}=r(78924),{Promise:p,PromisePrototypeThen:g}=r(96918),{isClosed:b,isReadable:w,isReadableNodeStream:y,isReadableStream:m,isReadableFinished:_,isReadableErrored:v,isWritable:S,isWritableNodeStream:E,isWritableStream:R,isWritableFinished:A,isWritableErrored:I,isNodeStream:T,willEmitClose:P,kIsClosedPromise:k}=r(84289);const C=()=>{};function N(e,t,r){var o,f;if(2===arguments.length?(r=t,t=l):null==t?t=l:h(t,"options"),u(r,"callback"),c(t.signal,"options.signal"),r=d(r),m(e)||R(e))return function(e,t,r){let o=!1,a=C;if(t.signal)if(a=()=>{o=!0,r.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(a);else{const n=r;r=d((function(){t.signal.removeEventListener("abort",a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.apply(e,i)})),t.signal.addEventListener("abort",a)}const s=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];o||n.nextTick((()=>r.apply(e,i)))};return g(e[k].promise,s,s),C}(e,t,r);if(!T(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);const p=null!==(o=t.readable)&&void 0!==o?o:y(e),N=null!==(f=t.writable)&&void 0!==f?f:E(e),x=e._writableState,O=e._readableState,M=()=>{e.writable||D()};let L=P(e)&&y(e)===p&&E(e)===N,j=A(e,!1);const D=()=>{j=!0,e.destroyed&&(L=!1),(!L||e.readable&&!p)&&(p&&!W||r.call(e))};let W=_(e,!1);const U=()=>{W=!0,e.destroyed&&(L=!1),(!L||e.writable&&!N)&&(N&&!j||r.call(e))},$=t=>{r.call(e,t)};let F=b(e);const q=()=>{F=!0;const t=I(e)||v(e);return t&&"boolean"!==typeof t?r.call(e,t):p&&!W&&y(e,!0)&&!_(e,!1)?r.call(e,new s):!N||j||A(e,!1)?void r.call(e):r.call(e,new s)},B=()=>{F=!0;const t=I(e)||v(e);if(t&&"boolean"!==typeof t)return r.call(e,t);r.call(e)},H=()=>{e.req.on("finish",D)};!function(e){return e.setHeader&&"function"===typeof e.abort}(e)?N&&!x&&(e.on("end",M),e.on("close",M)):(e.on("complete",D),L||e.on("abort",q),e.req?H():e.on("request",H)),L||"boolean"!==typeof e.aborted||e.on("aborted",q),e.on("end",U),e.on("finish",D),!1!==t.error&&e.on("error",$),e.on("close",q),F?n.nextTick(q):null!==x&&void 0!==x&&x.errorEmitted||null!==O&&void 0!==O&&O.errorEmitted?L||n.nextTick(B):(p||L&&!w(e)||!j&&!1!==S(e))&&(N||L&&!S(e)||!W&&!1!==w(e))?O&&e.req&&e.aborted&&n.nextTick(B):n.nextTick(B);const Z=()=>{r=C,e.removeListener("aborted",q),e.removeListener("complete",D),e.removeListener("abort",q),e.removeListener("request",H),e.req&&e.req.removeListener("finish",D),e.removeListener("end",M),e.removeListener("close",M),e.removeListener("finish",D),e.removeListener("end",U),e.removeListener("error",$),e.removeListener("close",q)};if(t.signal&&!F){const o=()=>{const n=r;Z(),n.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(o);else{const n=r;r=d((function(){t.signal.removeEventListener("abort",o);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n.apply(e,i)})),t.signal.addEventListener("abort",o)}}return Z}e.exports=N,e.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=l),null!==(r=t)&&void 0!==r&&r.cleanup&&(f(t.cleanup,"cleanup"),n=t.cleanup),new p(((r,i)=>{const o=N(e,t,(e=>{n&&o(),e?i(e):r()}))}))}},36691:(e,t,r)=>{"use strict";const n=r(1426),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:a}=r(96918),{Buffer:s}=r(19778),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:d}=r(82860).codes;e.exports=function(e,t,r){let c,u;if("string"===typeof t||t instanceof s)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[o])u=!0,c=t[o]();else{if(!t||!t[a])throw new l("iterable",["Iterable"],t);u=!1,c=t[a]()}const h=new e({objectMode:!0,highWaterMark:1,...r});let f=!1;return h._read=function(){f||(f=!0,async function(){for(;;){try{const{value:e,done:t}=u?await c.next():c.next();if(t)h.push(null);else{const t=e&&"function"===typeof e.then?await e:e;if(null===t)throw f=!1,new d;if(h.push(t))continue;f=!1}}catch(e){h.destroy(e)}break}}())},h._destroy=function(e,t){i(async function(e){const t=void 0!==e&&null!==e,r="function"===typeof c.throw;if(t&&r){const{value:t,done:r}=await c.throw(e);if(await t,r)return}if("function"===typeof c.return){const{value:e}=await c.return();await e}}(e),(()=>n.nextTick(t,e)),(r=>n.nextTick(t,r||e)))},h}},91672:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ObjectSetPrototypeOf:i}=r(96918),{EventEmitter:o}=r(47465);function a(e){o.call(this,e)}function s(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}i(a.prototype,o.prototype),i(a,o),a.prototype.pipe=function(e,t){const r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",d));let a=!1;function l(){a||(a=!0,e.end())}function d(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function c(e){u(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function u(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",l),r.removeListener("close",d),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return s(r,"error",c),s(e,"error",c),r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e},e.exports={Stream:a,prependListener:s}},40034:(e,t,r)=>{"use strict";const n=globalThis.AbortController||r(35935).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:l}=r(82860),{validateAbortSignal:d,validateInteger:c,validateObject:u}=r(78924),h=r(96918).Symbol("kWeak"),{finished:f}=r(19406),p=r(60089),{addAbortSignalNoValidate:g}=r(81206),{isWritable:b,isNodeStream:w}=r(84289),{ArrayPrototypePush:y,MathFloor:m,Number:_,NumberIsNaN:v,Promise:S,PromiseReject:E,PromisePrototypeThen:R,Symbol:A}=r(96918),I=A("kEmpty"),T=A("kEof");function P(e,t){if("function"!==typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&d(t.signal,"options.signal");let r=1;return null!=(null===t||void 0===t?void 0:t.concurrency)&&(r=m(t.concurrency)),c(r,"concurrency",1),async function*(){var i,o;const a=new n,s=this,d=[],c=a.signal,u={signal:c},h=()=>a.abort();let f,p;null!==t&&void 0!==t&&null!==(i=t.signal)&&void 0!==i&&i.aborted&&h(),null===t||void 0===t||null===(o=t.signal)||void 0===o||o.addEventListener("abort",h);let g=!1;function b(){g=!0}!async function(){try{for await(let t of s){var n;if(g)return;if(c.aborted)throw new l;try{t=e(t,u)}catch(o){t=E(o)}t!==I&&("function"===typeof(null===(n=t)||void 0===n?void 0:n.catch)&&t.catch(b),d.push(t),f&&(f(),f=null),!g&&d.length&&d.length>=r&&await new S((e=>{p=e})))}d.push(T)}catch(o){const e=E(o);R(e,void 0,b),d.push(e)}finally{var i;g=!0,f&&(f(),f=null),null===t||void 0===t||null===(i=t.signal)||void 0===i||i.removeEventListener("abort",h)}}();try{for(;;){for(;d.length>0;){const e=await d[0];if(e===T)return;if(c.aborted)throw new l;e!==I&&(yield e),d.shift(),p&&(p(),p=null)}await new S((e=>{f=e}))}}finally{a.abort(),g=!0,p&&(p(),p=null)}}.call(this)}async function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;for await(const r of C.call(this,e,t))return!0;return!1}function C(e,t){if("function"!==typeof e)throw new o("fn",["Function","AsyncFunction"],e);return P.call(this,(async function(t,r){return await e(t,r)?t:I}),t)}class N extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function x(e){if(e=_(e),v(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return null!=e&&u(e,"options"),null!=(null===e||void 0===e?void 0:e.signal)&&d(e.signal,"options.signal"),async function*(){let t=0;for await(const n of this){var r;if(null!==e&&void 0!==e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l({cause:e.signal.reason});yield[t++,n]}}.call(this)},drop:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&d(t.signal,"options.signal"),e=x(e),async function*(){var r;if(null!==t&&void 0!==t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(const i of this){var n;if(null!==t&&void 0!==t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;e--<=0&&(yield i)}}.call(this)},filter:C,flatMap:function(e,t){const r=P.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:P,take:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&d(t.signal,"options.signal"),e=x(e),async function*(){var r;if(null!==t&&void 0!==t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(const i of this){var n;if(null!==t&&void 0!==t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;if(!(e-- >0))return;yield i}}.call(this)},compose:function(e,t){if(null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&d(t.signal,"options.signal"),w(e)&&!b(e))throw new i("stream",e,"must be writable");const r=p(this,e);return null!==t&&void 0!==t&&t.signal&&g(t.signal,r),r}},e.exports.promiseReturningOperators={every:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("function"!==typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await k.call(this,(async function(){return!await e(...arguments)}),t)},forEach:async function(e,t){if("function"!==typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const r of P.call(this,(async function(t,r){return await e(t,r),I}),t));},reduce:async function(e,t,r){var i;if("function"!==typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=r&&u(r,"options"),null!=(null===r||void 0===r?void 0:r.signal)&&d(r.signal,"options.signal");let a=arguments.length>1;if(null!==r&&void 0!==r&&null!==(i=r.signal)&&void 0!==i&&i.aborted){const e=new l(void 0,{cause:r.signal.reason});throw this.once("error",(()=>{})),await f(this.destroy(e)),e}const s=new n,c=s.signal;if(null!==r&&void 0!==r&&r.signal){const e={once:!0,[h]:this};r.signal.addEventListener("abort",(()=>s.abort()),e)}let p=!1;try{for await(const n of this){var g;if(p=!0,null!==r&&void 0!==r&&null!==(g=r.signal)&&void 0!==g&&g.aborted)throw new l;a?t=await e(t,n,{signal:c}):(t=n,a=!0)}if(!p&&!a)throw new N}finally{s.abort()}return t},toArray:async function(e){null!=e&&u(e,"options"),null!=(null===e||void 0===e?void 0:e.signal)&&d(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(null!==e&&void 0!==e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l(void 0,{cause:e.signal.reason});y(t,n)}return t},some:k,find:async function(e,t){for await(const r of C.call(this,e,t))return r}}},22727:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n}=r(96918);e.exports=o;const i=r(96859);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n(o.prototype,i.prototype),n(o,i),o.prototype._transform=function(e,t,r){r(null,e)}},86622:(e,t,r)=>{const n=r(1426),{ArrayIsArray:i,Promise:o,SymbolAsyncIterator:a}=r(96918),s=r(19406),{once:l}=r(40670),d=r(2832),c=r(38120),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:w}=r(82860),{validateFunction:y,validateAbortSignal:m}=r(78924),{isIterable:_,isReadable:v,isReadableNodeStream:S,isNodeStream:E,isTransformStream:R,isWebStream:A,isReadableStream:I,isReadableEnded:T}=r(84289),P=globalThis.AbortController||r(35935).AbortController;let k,C;function N(e,t,r){let n=!1;e.on("close",(()=>{n=!0}));return{destroy:t=>{n||(n=!0,d.destroyer(e,t||new g("pipe")))},cleanup:s(e,{readable:t,writable:r},(e=>{n=!e}))}}function x(e){if(_(e))return e;if(S(e))return async function*(e){C||(C=r(5146));yield*C.prototype[a].call(e)}(e);throw new h("val",["Readable","Iterable","AsyncIterable"],e)}async function O(e,t,r,n){let i,{end:a}=n,l=null;const d=e=>{if(e&&(i=e),l){const e=l;l=null,e()}},c=()=>new o(((e,t)=>{i?t(i):l=()=>{i?t(i):e()}}));t.on("drain",d);const h=s(t,{readable:!1},d);try{t.writableNeedDrain&&await c();for await(const r of e)t.write(r)||await c();a&&t.end(),await c(),r()}catch(f){r(i!==f?u(i,f):f)}finally{h(),t.off("drain",d)}}async function M(e,t,r,n){let{end:i}=n;R(t)&&(t=t.writable);const o=t.getWriter();try{for await(const t of e)await o.ready,o.write(t).catch((()=>{}));await o.ready,i&&await o.close(),r()}catch(a){try{await o.abort(a),r(a)}catch(a){r(a)}}}function L(e,t,o){if(1===e.length&&i(e[0])&&(e=e[0]),e.length<2)throw new p("streams");const a=new P,s=a.signal,l=null===o||void 0===o?void 0:o.signal,d=[];function u(){D(new w)}let g,b;m(l,"options.signal"),null===l||void 0===l||l.addEventListener("abort",u);const y=[];let T,C=0;function L(e){D(e,0===--C)}function D(e,r){if(!e||g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code||(g=e),g||r){for(;y.length;)y.shift()(g);null===l||void 0===l||l.removeEventListener("abort",u),a.abort(),r&&(g||d.forEach((e=>e())),n.nextTick(t,g,b))}}for(let F=0;F<e.length;F++){const q=e[F],B=F<e.length-1,H=F>0,Z=B||!1!==(null===o||void 0===o?void 0:o.end),K=F===e.length-1;if(E(q)){if(Z){const{destroy:V,cleanup:G}=N(q,B,H);y.push(V),v(q)&&K&&d.push(G)}function W(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&L(e)}q.on("error",W),v(q)&&K&&d.push((()=>{q.removeListener("error",W)}))}if(0===F)if("function"===typeof q){if(T=q({signal:s}),!_(T))throw new f("Iterable, AsyncIterable or Stream","source",T)}else T=_(q)||S(q)||R(q)?q:c.from(q);else if("function"===typeof q){var U;if(R(T))T=x(null===(U=T)||void 0===U?void 0:U.readable);else T=x(T);if(T=q(T,{signal:s}),B){if(!_(T,!0))throw new f("AsyncIterable",`transform[${F-1}]`,T)}else{var $;k||(k=r(22727));const z=new k({objectMode:!0}),Y=null===($=T)||void 0===$?void 0:$.then;if("function"===typeof Y)C++,Y.call(T,(e=>{b=e,null!=e&&z.write(e),Z&&z.end(),n.nextTick(L)}),(e=>{z.destroy(e),n.nextTick(L,e)}));else if(_(T,!0))C++,O(T,z,L,{end:Z});else{if(!I(T)&&!R(T))throw new f("AsyncIterable or Promise","destination",T);{const Q=T.readable||T;C++,O(Q,z,L,{end:Z})}}T=z;const{destroy:J,cleanup:X}=N(T,!1,!0);y.push(J),K&&d.push(X)}}else if(E(q)){if(S(T)){C+=2;const ee=j(T,q,L,{end:Z});v(q)&&K&&d.push(ee)}else if(R(T)||I(T)){const te=T.readable||T;C++,O(te,q,L,{end:Z})}else{if(!_(T))throw new h("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],T);C++,O(T,q,L,{end:Z})}T=q}else if(A(q)){if(S(T))C++,M(x(T),q,L,{end:Z});else if(I(T)||_(T))C++,M(T,q,L,{end:Z});else{if(!R(T))throw new h("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],T);C++,M(T.readable,q,L,{end:Z})}T=q}else T=c.from(q)}return(null!==s&&void 0!==s&&s.aborted||null!==l&&void 0!==l&&l.aborted)&&n.nextTick(u),T}function j(e,t,r,i){let{end:o}=i,a=!1;if(t.on("close",(()=>{a||r(new b)})),e.pipe(t,{end:!1}),o){function l(){a=!0,t.end()}T(e)?n.nextTick(l):e.once("end",l)}else r();return s(e,{readable:!0,writable:!1},(t=>{const n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)})),s(t,{readable:!1,writable:!0},r)}e.exports={pipelineImpl:L,pipeline:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return L(t,l(function(e){return y(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(t)))}}},5146:(e,t,r)=>{const n=r(1426),{ArrayPrototypeIndexOf:i,NumberIsInteger:o,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:l,ObjectKeys:d,ObjectSetPrototypeOf:c,Promise:u,SafeSet:h,SymbolAsyncIterator:f,Symbol:p}=r(96918);e.exports=U,U.ReadableState=W;const{EventEmitter:g}=r(47465),{Stream:b,prependListener:w}=r(91672),{Buffer:y}=r(19778),{addAbortSignal:m}=r(81206),_=r(19406);let v=r(40670).debuglog("stream",(e=>{v=e}));const S=r(74789),E=r(2832),{getHighWaterMark:R,getDefaultHighWaterMark:A}=r(33330),{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:P,ERR_OUT_OF_RANGE:k,ERR_STREAM_PUSH_AFTER_EOF:C,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:N}}=r(82860),{validateObject:x}=r(78924),O=p("kPaused"),{StringDecoder:M}=r(15948),L=r(36691);c(U.prototype,b.prototype),c(U,b);const j=()=>{},{errorOrDestroy:D}=E;function W(e,t,n){"boolean"!==typeof n&&(n=t instanceof r(38120)),this.objectMode=!(!e||!e.objectMode),n&&(this.objectMode=this.objectMode||!(!e||!e.readableObjectMode)),this.highWaterMark=e?R(this,e,"readableHighWaterMark",n):A(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[O]=null,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new M(e.encoding),this.encoding=e.encoding)}function U(e){if(!(this instanceof U))return new U(e);const t=this instanceof r(38120);this._readableState=new W(e,this,t),e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&m(e.signal,this)),b.call(this,e),E.construct(this,(()=>{this._readableState.needReadable&&Z(this,this._readableState)}))}function $(e,t,r,n){v("readableAddChunk",t);const i=e._readableState;let o;if(i.objectMode||("string"===typeof t?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=y.from(t,r).toString(i.encoding):(t=y.from(t,r),r=""))):t instanceof y?r="":b._isUint8Array(t)?(t=b._uint8ArrayToBuffer(t),r=""):null!=t&&(o=new T("chunk",["string","Buffer","Uint8Array"],t))),o)D(e,o);else if(null===t)i.reading=!1,function(e,t){if(v("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?B(e):(t.needReadable=!1,t.emittedReadable=!0,H(e))}(e,i);else if(i.objectMode||t&&t.length>0)if(n)if(i.endEmitted)D(e,new N);else{if(i.destroyed||i.errored)return!1;F(e,i,t,!0)}else if(i.ended)D(e,new C);else{if(i.destroyed||i.errored)return!1;i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||0!==t.length?F(e,i,t,!1):Z(e,i)):F(e,i,t,!1)}else n||(i.reading=!1,Z(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function F(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&B(e)),Z(e,t)}U.prototype.destroy=E.destroy,U.prototype._undestroy=E.undestroy,U.prototype._destroy=function(e,t){t(e)},U.prototype[g.captureRejectionSymbol]=function(e){this.destroy(e)},U.prototype.push=function(e,t){return $(this,e,t,!1)},U.prototype.unshift=function(e,t){return $(this,e,t,!0)},U.prototype.isPaused=function(){const e=this._readableState;return!0===e[O]||!1===e.flowing},U.prototype.setEncoding=function(e){const t=new M(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const r=this._readableState.buffer;let n="";for(const i of r)n+=t.write(i);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this};function q(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function B(e){const t=e._readableState;v("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(v("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(H,e))}function H(e){const t=e._readableState;v("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Y(e)}function Z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(K,e,t))}function K(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const r=t.length;if(v("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function V(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[O]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function G(e){v("readable nexttick read 0"),e.read(0)}function z(e,t){v("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Y(e),t.flowing&&!t.reading&&e.read(0)}function Y(e){const t=e._readableState;for(v("flow",t.flowing);t.flowing&&null!==e.read(););}function J(e,t){"function"!==typeof e.read&&(e=U.wrap(e,{objectMode:!0}));const r=async function*(e,t){let r,n=j;function i(t){this===e?(n(),n=j):n=t}e.on("readable",i);const o=_(e,{writable:!1},(e=>{r=e?I(r,e):null,n(),n=j}));try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new u(i)}}}catch(a){throw r=I(r,a),r}finally{!r&&!1===(null===t||void 0===t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",i),o()):E.destroyer(e,null)}}(e,t);return r.stream=e,r}function X(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function Q(e){const t=e._readableState;v("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(ee,t,e))}function ee(e,t){if(v("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)n.nextTick(te,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function te(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let re;function ne(){return void 0===re&&(re={}),re}U.prototype.read=function(e){v("read",e),void 0===e?e=NaN:o(e)||(e=s(e,10));const t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new k("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return v("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Q(this):B(this),null;if(0===(e=q(e,t))&&t.ended)return 0===t.length&&Q(this),null;let n,i=t.needReadable;if(v("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,v("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,v("reading, ended or constructing",i);else if(i){v("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0);try{this._read(t.highWaterMark)}catch(a){D(this,a)}t.sync=!1,t.reading||(e=q(r,t))}return n=e>0?X(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Q(this)),null===n||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",n)),n},U.prototype._read=function(e){throw new P("_read()")},U.prototype.pipe=function(e,t){const r=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new h(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),v("pipe count=%d opts=%j",i.pipes.length,t);const o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:b;function a(t,n){v("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,function(){v("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),l&&e.removeListener("drain",l);e.removeListener("error",f),e.removeListener("unpipe",a),r.removeListener("end",s),r.removeListener("end",b),r.removeListener("data",u),d=!0,l&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&l()}())}function s(){v("onend"),e.end()}let l;i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",a);let d=!1;function c(){d||(1===i.pipes.length&&i.pipes[0]===e?(v("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(v("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),r.pause()),l||(l=function(e,t){return function(){const r=e._readableState;r.awaitDrainWriters===t?(v("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(v("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),r.awaitDrainWriters&&0!==r.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(r,e),e.on("drain",l))}function u(t){v("ondata");const r=e.write(t);v("dest.write",r),!1===r&&c()}function f(t){if(v("onerror",t),b(),e.removeListener("error",f),0===e.listenerCount("error")){const r=e._writableState||e._readableState;r&&!r.errorEmitted?D(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",g),b()}function g(){v("onfinish"),e.removeListener("close",p),b()}function b(){v("unpipe"),r.unpipe(e)}return r.on("data",u),w(e,"error",f),e.once("close",p),e.once("finish",g),e.emit("pipe",r),!0===e.writableNeedDrain?i.flowing&&c():i.flowing||(v("pipe resume"),r.resume()),e},U.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const r=i(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},U.prototype.on=function(e,t){const r=b.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,v("on readable",i.length,i.reading),i.length?B(this):i.reading||n.nextTick(G,this))),r},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(e,t){const r=b.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(V,this),r},U.prototype.off=U.prototype.removeListener,U.prototype.removeAllListeners=function(e){const t=b.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(V,this),t},U.prototype.resume=function(){const e=this._readableState;return e.flowing||(v("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(z,e,t))}(this,e)),e[O]=!1,this},U.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[O]=!0,this},U.prototype.wrap=function(e){let t=!1;e.on("data",(r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{D(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const r=d(e);for(let n=1;n<r.length;n++){const t=r[n];void 0===this[t]&&"function"===typeof e[t]&&(this[t]=e[t].bind(e))}return this},U.prototype[f]=function(){return J(this)},U.prototype.iterator=function(e){return void 0!==e&&x(e,"options"),J(this,e)},l(U.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),l(W.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[O]},set(e){this[O]=!!e}}}),U._fromList=X,U.from=function(e,t){return L(U,e,t)},U.fromWeb=function(e,t){return ne().newStreamReadableFromReadableStream(e,t)},U.toWeb=function(e,t){return ne().newReadableStreamFromStreamReadable(e,t)},U.wrap=function(e,t){var r,n;return new U({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r,...t,destroy(t,r){E.destroyer(e,t),r(t)}}).wrap(e)}},33330:(e,t,r)=>{"use strict";const{MathFloor:n,NumberIsInteger:i}=r(96918),{ERR_INVALID_ARG_VALUE:o}=r(82860).codes;function a(e){return e?16:16384}e.exports={getHighWaterMark:function(e,t,r,s){const l=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,s,r);if(null!=l){if(!i(l)||l<0){throw new o(s?`options.${r}`:"options.highWaterMark",l)}return n(l)}return a(e.objectMode)},getDefaultHighWaterMark:a}},96859:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n,Symbol:i}=r(96918);e.exports=d;const{ERR_METHOD_NOT_IMPLEMENTED:o}=r(82860).codes,a=r(38120),{getHighWaterMark:s}=r(33330);n(d.prototype,a.prototype),n(d,a);const l=i("kCallback");function d(e){if(!(this instanceof d))return new d(e);const t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function c(e){"function"!==typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())}))}function u(){this._final!==c&&c.call(this)}d.prototype._final=c,d.prototype._transform=function(e,t,r){throw new o("_transform()")},d.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,((e,t)=>{e?r(e):(null!=t&&this.push(t),i.ended||o===n.length||n.length<n.highWaterMark?r():this[l]=r)}))},d.prototype._read=function(){if(this[l]){const e=this[l];this[l]=null,e()}}},84289:(e,t,r)=>{"use strict";const{Symbol:n,SymbolAsyncIterator:i,SymbolIterator:o,SymbolFor:a}=r(96918),s=n("kDestroyed"),l=n("kIsErrored"),d=n("kIsReadable"),c=n("kIsDisturbed"),u=a("nodejs.webstream.isClosedPromise"),h=a("nodejs.webstream.controllerErrorFunction");function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r;return!(!e||"function"!==typeof e.pipe||"function"!==typeof e.on||t&&("function"!==typeof e.pause||"function"!==typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function p(e){var t;return!(!e||"function"!==typeof e.write||"function"!==typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function g(e){return e&&(e._readableState||e._writableState||"function"===typeof e.write&&"function"===typeof e.on||"function"===typeof e.pipe&&"function"===typeof e.on)}function b(e){return!(!e||g(e)||"function"!==typeof e.pipeThrough||"function"!==typeof e.getReader||"function"!==typeof e.cancel)}function w(e){return!(!e||g(e)||"function"!==typeof e.getWriter||"function"!==typeof e.abort)}function y(e){return!(!e||g(e)||"object"!==typeof e.readable||"object"!==typeof e.writable)}function m(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[s]||null!==n&&void 0!==n&&n.destroyed)}function _(e){if(!p(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null===t||void 0===t||!t.errored)&&("boolean"!==typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)}function v(e,t){if(!f(e))return null;const r=e._readableState;return(null===r||void 0===r||!r.errored)&&("boolean"!==typeof(null===r||void 0===r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function S(e){return e&&null!=e[d]?e[d]:"boolean"!==typeof(null===e||void 0===e?void 0:e.readable)?null:!m(e)&&(f(e)&&e.readable&&!v(e))}function E(e){return"boolean"!==typeof(null===e||void 0===e?void 0:e.writable)?null:!m(e)&&(p(e)&&e.writable&&!_(e))}function R(e){return"boolean"===typeof e._closed&&"boolean"===typeof e._defaultKeepAlive&&"boolean"===typeof e._removedConnection&&"boolean"===typeof e._removedContLen}function A(e){return"boolean"===typeof e._sent100&&R(e)}e.exports={kDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[c])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:c,isErrored:function(e){var t,r,n,i,o,a,s,d,c,u;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=null!==(a=e[l])&&void 0!==a?a:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(s=e._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==n?n:null===(d=e._writableState)||void 0===d?void 0:d.errorEmitted)&&void 0!==r?r:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null===(u=e._writableState)||void 0===u?void 0:u.errored))},kIsErrored:l,isReadable:S,kIsReadable:d,kIsClosedPromise:u,kControllerErrorFunction:h,isClosed:function(e){if(!g(e))return null;if("boolean"===typeof e.closed)return e.closed;const t=e._writableState,r=e._readableState;return"boolean"===typeof(null===t||void 0===t?void 0:t.closed)||"boolean"===typeof(null===r||void 0===r?void 0:r.closed)?(null===t||void 0===t?void 0:t.closed)||(null===r||void 0===r?void 0:r.closed):"boolean"===typeof e._closed&&R(e)?e._closed:null},isDestroyed:m,isDuplexNodeStream:function(e){return!(!e||"function"!==typeof e.pipe||!e._readableState||"function"!==typeof e.on||"function"!==typeof e.write)},isFinished:function(e,t){return g(e)?!!m(e)||(!1===(null===t||void 0===t?void 0:t.readable)||!S(e))&&(!1===(null===t||void 0===t?void 0:t.writable)||!E(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"===typeof e[i]:!1===t?"function"===typeof e[o]:"function"===typeof e[i]||"function"===typeof e[o])},isReadableNodeStream:f,isReadableStream:b,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!==typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)},isReadableFinished:v,isReadableErrored:function(e){var t,r;return g(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:g,isWebStream:function(e){return b(e)||w(e)||y(e)},isWritable:E,isWritableNodeStream:p,isWritableStream:w,isWritableEnded:_,isWritableFinished:function(e,t){if(!p(e))return null;if(!0===e.writableFinished)return!0;const r=e._writableState;return(null===r||void 0===r||!r.errored)&&("boolean"!==typeof(null===r||void 0===r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return g(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"===typeof e._consuming&&"boolean"===typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:A,willEmitClose:function(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&A(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:y}},63654:(e,t,r)=>{const n=r(1426),{ArrayPrototypeSlice:i,Error:o,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:l,ObjectSetPrototypeOf:d,StringPrototypeToLowerCase:c,Symbol:u,SymbolHasInstance:h}=r(96918);e.exports=M,M.WritableState=x;const{EventEmitter:f}=r(47465),p=r(91672).Stream,{Buffer:g}=r(19778),b=r(2832),{addAbortSignal:w}=r(81206),{getHighWaterMark:y,getDefaultHighWaterMark:m}=r(33330),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:v,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:R,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:T,ERR_UNKNOWN_ENCODING:P}=r(82860).codes,{errorOrDestroy:k}=b;function C(){}d(M.prototype,p.prototype),d(M,p);const N=u("kOnFinished");function x(e,t,n){"boolean"!==typeof n&&(n=t instanceof r(38120)),this.objectMode=!(!e||!e.objectMode),n&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",n):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=W.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,O(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[N]=[]}function O(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function M(e){const t=this instanceof r(38120);if(!t&&!a(M,this))return new M(e);this._writableState=new x(e,this,t),e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final),"function"===typeof e.construct&&(this._construct=e.construct),e.signal&&w(e.signal,this)),p.call(this,e),b.construct(this,(()=>{const e=this._writableState;e.writing||q(this,e),Z(this,e)}))}function L(e,t,r,i){const o=e._writableState;if("function"===typeof r)i=r,r=o.defaultEncoding;else{if(r){if("buffer"!==r&&!g.isEncoding(r))throw new P(r)}else r=o.defaultEncoding;"function"!==typeof i&&(i=C)}if(null===t)throw new I;if(!o.objectMode)if("string"===typeof t)!1!==o.decodeStrings&&(t=g.from(t,r),r="buffer");else if(t instanceof g)r="buffer";else{if(!p._isUint8Array(t))throw new _("chunk",["string","Buffer","Uint8Array"],t);t=p._uint8ArrayToBuffer(t),r="buffer"}let a;return o.ending?a=new T:o.destroyed&&(a=new R("write")),a?(n.nextTick(i,a),k(e,a,!0),a):(o.pendingcb++,function(e,t,r,n,i){const o=t.objectMode?1:r.length;t.length+=o;const a=t.length<t.highWaterMark;a||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==C&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1);return a&&!t.errored&&!t.destroyed}(e,o,t,r,i))}function j(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new R("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function D(e,t,r,n){--t.pendingcb,n(r),F(t),k(e,r)}function W(e,t){const r=e._writableState,i=r.sync,o=r.writecb;"function"===typeof o?(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(D,e,r,t,o):D(e,r,t,o)):(r.buffered.length>r.bufferedIndex&&q(e,r),i?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===o?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:o,stream:e,state:r},n.nextTick(U,r.afterWriteTickInfo)):$(e,r,1,o))):k(e,new S)}function U(e){let{stream:t,state:r,count:n,cb:i}=e;return r.afterWriteTickInfo=null,$(t,r,n,i)}function $(e,t,r,n){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&F(t),Z(e,t)}function F(e){if(e.writing)return;for(let i=e.bufferedIndex;i<e.buffered.length;++i){var t;const{chunk:r,callback:n}=e.buffered[i],o=e.objectMode?1:r.length;e.length-=o,n(null!==(t=e.errored)&&void 0!==t?t:new R("write"))}const r=e[N].splice(0);for(let i=0;i<r.length;i++){var n;r[i](null!==(n=e.errored)&&void 0!==n?n:new R("end"))}O(e)}function q(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:r,bufferedIndex:n,objectMode:o}=t,a=r.length-n;if(!a)return;let s=n;if(t.bufferProcessing=!0,a>1&&e._writev){t.pendingcb-=a-1;const n=t.allNoop?C:e=>{for(let t=s;t<r.length;++t)r[t].callback(e)},o=t.allNoop&&0===s?r:i(r,s);o.allBuffers=t.allBuffers,j(e,t,!0,t.length,o,"",n),O(t)}else{do{const{chunk:n,encoding:i,callback:a}=r[s];r[s++]=null;j(e,t,!1,o?1:n.length,n,i,a)}while(s<r.length&&!t.writing);s===r.length?O(t):s>256?(r.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function B(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function H(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let r=!1;function i(i){if(r)k(e,null!==i&&void 0!==i?i:S());else if(r=!0,t.pendingcb--,i){const r=t[N].splice(0);for(let e=0;e<r.length;e++)r[e](i);k(e,i,t.sync)}else B(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,n.nextTick(K,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(o){i(o)}t.sync=!1}(e,t)))}function Z(e,t,r){B(t)&&(H(e,t),0===t.pendingcb&&(r?(t.pendingcb++,n.nextTick(((e,t)=>{B(t)?K(e,t):t.pendingcb--}),e,t)):B(t)&&(t.pendingcb++,K(e,t))))}function K(e,t){t.pendingcb--,t.finished=!0;const r=t[N].splice(0);for(let n=0;n<r.length;n++)r[n]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}x.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},s(x.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(M,h,{__proto__:null,value:function(e){return!!a(this,e)||this===M&&(e&&e._writableState instanceof x)}}),M.prototype.pipe=function(){k(this,new E)},M.prototype.write=function(e,t,r){return!0===L(this,e,t,r)},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||q(this,e))},M.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=c(e)),!g.isEncoding(e))throw new P(e);return this._writableState.defaultEncoding=e,this},M.prototype._write=function(e,t,r){if(!this._writev)throw new v("_write()");this._writev([{chunk:e,encoding:t}],r)},M.prototype._writev=null,M.prototype.end=function(e,t,r){const i=this._writableState;let a;if("function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e){const r=L(this,e,t);r instanceof o&&(a=r)}return i.corked&&(i.corked=1,this.uncork()),a||(i.errored||i.ending?i.finished?a=new A("end"):i.destroyed&&(a=new R("end")):(i.ending=!0,Z(this,i,!0),i.ended=!0)),"function"===typeof r&&(a||i.finished?n.nextTick(r,a):i[N].push(r)),this},l(M.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const V=b.destroy;let G;function z(){return void 0===G&&(G={}),G}M.prototype.destroy=function(e,t){const r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[N].length)&&n.nextTick(F,r),V.call(this,e,t),this},M.prototype._undestroy=b.undestroy,M.prototype._destroy=function(e,t){t(e)},M.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},M.fromWeb=function(e,t){return z().newStreamWritableFromWritableStream(e,t)},M.toWeb=function(e){return z().newWritableStreamFromStreamWritable(e)}},78924:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:d,NumberMIN_SAFE_INTEGER:c,NumberParseInt:u,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:b}=r(96918),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:v,ERR_UNKNOWN_SIGNAL:S}}=r(82860),{normalizeEncoding:E}=r(40670),{isAsyncFunction:R,isArrayBufferView:A}=r(40670).types,I={};const T=/^[0-7]+$/;const P=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;if("number"!==typeof e)throw new m(t,"number",e);if(!s(e))throw new v(t,"an integer",e);if(e<r||e>n)throw new v(t,`>= ${r} && <= ${n}`,e)})),k=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-2147483648,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2147483647;if("number"!==typeof e)throw new m(t,"number",e);if(!s(e))throw new v(t,"an integer",e);if(e<r||e>n)throw new v(t,`>= ${r} && <= ${n}`,e)})),C=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"!==typeof e)throw new m(t,"number",e);if(!s(e))throw new v(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new v(t,`>= ${n} && <= ${i}`,e)}));function N(e,t){if("string"!==typeof e)throw new m(t,"string",e)}const x=w(((e,t,r)=>{if(!i(r,e)){const n=o(a(r,(e=>"string"===typeof e?`'${e}'`:p(e))),", ");throw new _(t,e,"must be one of: "+n)}}));function O(e,t){if("boolean"!==typeof e)throw new m(t,"boolean",e)}function M(e,t,r){return null!=e&&h(e,t)?e[t]:r}const L=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=M(r,"allowArray",!1),o=M(r,"allowFunction",!1);if(!M(r,"nullable",!1)&&null===e||!i&&n(e)||"object"!==typeof e&&(!o||"function"!==typeof e))throw new m(t,"Object",e)})),j=w(((e,t)=>{if(null!=e&&"object"!==typeof e&&"function"!==typeof e)throw new m(t,"a dictionary",e)})),D=w((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!n(e))throw new m(t,"Array",e);if(e.length<r){throw new _(t,e,`must be longer than ${r}`)}}));const W=w((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffer";if(!A(e))throw new m(t,["Buffer","TypedArray","DataView"],e)}));const U=w(((e,t)=>{if(void 0!==e&&(null===e||"object"!==typeof e||!("aborted"in e)))throw new m(t,"AbortSignal",e)})),$=w(((e,t)=>{if("function"!==typeof e)throw new m(t,"Function",e)})),F=w(((e,t)=>{if("function"!==typeof e||R(e))throw new m(t,"Function",e)})),q=w(((e,t)=>{if(void 0!==e)throw new m(t,"undefined",e)}));const B=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function H(e,t){if("undefined"===typeof e||!f(B,e))throw new _(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if("undefined"===typeof e&&(e=r),"string"===typeof e){if(null===f(T,e))throw new _(t,e,"must be a 32-bit unsigned integer or an octal string");e=u(e,8)}return C(e,t),e},validateArray:D,validateStringArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)N(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)O(e[r],`${t}[${r}]`)},validateBoolean:O,validateBuffer:W,validateDictionary:j,validateEncoding:function(e,t){const r=E(t),n=e.length;if("hex"===r&&n%2!==0)throw new _("encoding",t,`is invalid for data of length ${n}`)},validateFunction:$,validateInt32:k,validateInteger:P,validateNumber:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if("number"!==typeof e)throw new m(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&l(e))throw new v(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:L,validateOneOf:x,validatePlainFunction:F,validatePort:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Port",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"!==typeof e&&"string"!==typeof e||"string"===typeof e&&0===b(e).length||+e!==+e>>>0||e>65535||0===e&&!r)throw new y(t,e,r);return 0|e},validateSignalName:function(e){if(N(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"signal"),void 0===I[e]){if(void 0!==I[g(e)])throw new S(e+" (signals must use all capital letters)");throw new S(e)}},validateString:N,validateUint32:C,validateUndefined:q,validateUnion:function(e,t,r){if(!i(r,e))throw new m(t,`('${o(r,"|")}')`,e)},validateAbortSignal:U,validateLinkHeaderValue:function(e){if("string"===typeof e)return H(e,"hints"),e;if(n(e)){const t=e.length;let r="";if(0===t)return r;for(let n=0;n<t;n++){const i=e[n];H(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new _("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},95898:(e,t,r)=>{"use strict";const n=r(51831),i=r(57653),o=n.Readable.destroy;e.exports=n.Readable,e.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,e.exports._isUint8Array=n._isUint8Array,e.exports.isDisturbed=n.isDisturbed,e.exports.isErrored=n.isErrored,e.exports.isReadable=n.isReadable,e.exports.Readable=n.Readable,e.exports.Writable=n.Writable,e.exports.Duplex=n.Duplex,e.exports.Transform=n.Transform,e.exports.PassThrough=n.PassThrough,e.exports.addAbortSignal=n.addAbortSignal,e.exports.finished=n.finished,e.exports.destroy=n.destroy,e.exports.destroy=o,e.exports.pipeline=n.pipeline,e.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get:()=>i}),e.exports.Stream=n.Stream,e.exports.default=e.exports},82860:(e,t,r)=>{"use strict";const{format:n,inspect:i,AggregateError:o}=r(40670),a=globalThis.AggregateError||o,s=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],d=/^([A-Z][a-z0-9]*)+$/,c={};function u(e,t){if(!e)throw new c.ERR_INTERNAL_ASSERTION(t)}function h(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,r){r||(r=Error);class i extends r{constructor(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];super(function(e,t,r){if("function"===typeof t)return u(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const i=(t.match(/%[dfijoOs]/g)||[]).length;return u(i===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),0===r.length?t:n(t,...r)}(e,t,i))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[s]=!0,c[e]=i}function p(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==t&&"object"!==typeof t)throw new c.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",((e,t,r)=>{u("string"===typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const o=[],a=[],s=[];for(const i of t)u("string"===typeof i,"All expected entries have to be of type string"),l.includes(i)?o.push(i.toLowerCase()):d.test(i)?a.push(i):(u("object"!==i,'The value "object" should be written as "Object"'),s.push(i));if(a.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),a.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();n+=`one of type ${o.join(", ")}, or ${e}`}}(a.length>0||s.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();n+=`an instance of ${a.join(", ")}, or ${e}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();n+=`one of ${s.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"===typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"===typeof r){var c;if(null!==(c=r.constructor)&&void 0!==c&&c.name)n+=`. Received an instance of ${r.constructor.name}`;else{n+=`. Received ${i(r,{depth:-1})}`}}else{let e=i(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n}),TypeError),f("ERR_INVALID_ARG_VALUE",(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid",n=i(t);n.length>128&&(n=n.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`}),TypeError),f("ERR_INVALID_RETURN_VALUE",((e,t,r)=>{var n;return`Expected ${e} to be returned from the "${t}" function but got ${null!==r&&void 0!==r&&null!==(n=r.constructor)&&void 0!==n&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`}),TypeError),f("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n;u(t.length>0,"At least one arg needs to be specified");const i=t.length;switch(t=(Array.isArray(t)?t:[t]).map((e=>`"${e}"`)).join(" or "),i){case 1:n+=`The ${t[0]} argument`;break;case 2:n+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const e=t.pop();n+=`The ${t.join(", ")}, and ${e} arguments`}}return`${n} must be specified`}),TypeError),f("ERR_OUT_OF_RANGE",((e,t,r)=>{let n;return u(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32?n=h(String(r)):"bigint"===typeof r?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=h(n)),n+="n"):n=i(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`}),RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:g,aggregateTwoErrors:p((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new a([t,e],t.message);return r.code=t.code,r}return e||t})),hideStackFrames:p,codes:c}},96918:e=>{"use strict";e.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error:Error,FunctionPrototypeCall(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e.call(t,...n)},FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Uint8Array:Uint8Array}},40670:(e,t,r)=>{"use strict";const n=r(19778),i=Object.getPrototypeOf((async function(){})).constructor,o=globalThis.Blob||n.Blob,a="undefined"!==typeof o?function(e){return e instanceof o}:function(e){return!1};class s extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}},createDeferredPromise:function(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}},promisify:e=>new Promise(((t,r)=>{e((function(e){if(e)return r(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t(...i)}))})),debuglog:()=>function(){},format(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.replace(/%([sdifj])/g,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,o]=t;const a=r.shift();if("f"===o)return a.toFixed(6);if("j"===o)return JSON.stringify(a);if("s"===o&&"object"===typeof a){return`${a.constructor!==Object?a.constructor.name:""} {}`.trim()}return a.toString()}))},inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof i,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:a},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},51831:(e,t,r)=>{const{Buffer:n}=r(19778),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:a}=r(96918),{promisify:{custom:s}}=r(40670),{streamReturningOperators:l,promiseReturningOperators:d}=r(40034),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=r(82860),u=r(60089),{pipeline:h}=r(86622),{destroyer:f}=r(2832),p=r(19406),g=r(57653),b=r(84289),w=e.exports=r(91672).Stream;w.isDisturbed=b.isDisturbed,w.isErrored=b.isErrored,w.isReadable=b.isReadable,w.Readable=r(5146);for(const _ of o(l)){const v=l[_];function y(){if(new.target)throw c();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return w.Readable.from(a(v,this,t))}i(y,"name",{__proto__:null,value:v.name}),i(y,"length",{__proto__:null,value:v.length}),i(w.Readable.prototype,_,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}for(const S of o(d)){const E=d[S];function y(){if(new.target)throw c();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(E,this,t)}i(y,"name",{__proto__:null,value:E.name}),i(y,"length",{__proto__:null,value:E.length}),i(w.Readable.prototype,S,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}w.Writable=r(63654),w.Duplex=r(38120),w.Transform=r(96859),w.PassThrough=r(22727),w.pipeline=h;const{addAbortSignal:m}=r(81206);w.addAbortSignal=m,w.finished=p,w.destroy=f,w.compose=u,i(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),i(h,s,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),i(p,s,{__proto__:null,enumerable:!0,get:()=>g.finished}),w.Stream=w,w._isUint8Array=function(e){return e instanceof Uint8Array},w._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}},57653:(e,t,r)=>{"use strict";const{ArrayPrototypePop:n,Promise:i}=r(96918),{isIterable:o,isNodeStream:a,isWebStream:s}=r(84289),{pipelineImpl:l}=r(86622),{finished:d}=r(19406);r(51831),e.exports={finished:d,pipeline:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new i(((e,r)=>{let i,d;const c=t[t.length-1];if(c&&"object"===typeof c&&!a(c)&&!o(c)&&!s(c)){const e=n(t);i=e.signal,d=e.end}l(t,((t,n)=>{t?r(t):e(n)}),{signal:i,end:d})}))}}},66300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProviderError=t.EthereumRpcError=void 0;const n=r(11053);class i extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!==typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return n.default(this.serialize(),o,2)}}t.EthereumRpcError=i;function o(e,t){if("[Circular]"!==t)return t}t.EthereumProviderError=class extends i{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}},3381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.errorCodes=void 0,t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}},78041:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethErrors=void 0;const n=r(66300),i=r(34432),o=r(3381);function a(e,t){const[r,o]=l(t);return new n.EthereumRpcError(e,r||i.getMessageFromCode(e),o)}function s(e,t){const[r,o]=l(t);return new n.EthereumProviderError(e,r||i.getMessageFromCode(e),o)}function l(e){if(e){if("string"===typeof e)return[e];if("object"===typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!==typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}t.ethErrors={rpc:{parse:e=>a(o.errorCodes.rpc.parse,e),invalidRequest:e=>a(o.errorCodes.rpc.invalidRequest,e),invalidParams:e=>a(o.errorCodes.rpc.invalidParams,e),methodNotFound:e=>a(o.errorCodes.rpc.methodNotFound,e),internal:e=>a(o.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return a(t,e)},invalidInput:e=>a(o.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>a(o.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>a(o.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>a(o.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>a(o.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>a(o.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>s(o.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>s(o.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>s(o.errorCodes.provider.unsupportedMethod,e),disconnected:e=>s(o.errorCodes.provider.disconnected,e),chainDisconnected:e=>s(o.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:i}=e;if(!r||"string"!==typeof r)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(t,r,i)}}}},27037:(e,t,r)=>{"use strict";t.Cg=t.Sy=void 0;const n=r(66300);Object.defineProperty(t,"Cg",{enumerable:!0,get:function(){return n.EthereumRpcError}});const i=r(34432);const o=r(78041);Object.defineProperty(t,"Sy",{enumerable:!0,get:function(){return o.ethErrors}});const a=r(3381)},34432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=r(3381),i=r(66300),o=n.errorCodes.rpc.internal,a="Unspecified error message. This is a bug, please report it.",s={code:o,message:l(o)};function l(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if(Number.isInteger(e)){const r=e.toString();if(h(n.errorValues,r))return n.errorValues[r].message;if(c(e))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function d(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!n.errorValues[t]||!!c(e)}function c(e){return e>=-32099&&e<=-32e3}function u(e){return e&&"object"===typeof e&&!Array.isArray(e)?Object.assign({},e):e}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=l,t.isValidCode=d,t.serializeError=function(e){let{fallbackError:t=s,shouldIncludeStack:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,o;if(!t||!Number.isInteger(t.code)||"string"!==typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof i.EthereumRpcError)return e.serialize();const a={};if(e&&"object"===typeof e&&!Array.isArray(e)&&h(e,"code")&&d(e.code)){const t=e;a.code=t.code,t.message&&"string"===typeof t.message?(a.message=t.message,h(t,"data")&&(a.data=t.data)):(a.message=l(a.code),a.data={originalError:u(e)})}else{a.code=t.code;const r=null===(n=e)||void 0===n?void 0:n.message;a.message=r&&"string"===typeof r?r:t.message,a.data={originalError:u(e)}}const c=null===(o=e)||void 0===o?void 0:o.stack;return r&&e&&c&&"string"===typeof c&&(a.stack=c),a}},78262:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!==i--;){var a=o[i];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}}}]);
//# sourceMappingURL=530.0c58e5fa.chunk.js.map